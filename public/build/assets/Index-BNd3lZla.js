import{r as e,W as t,w as r,c as a,v as s,E as l,G as n,u as o,H as i,C as d,K as c,D as u,O as p,F as g,V as m,J as x,m as y,M as v,N as b,L as f,U as h,Q as w,y as k,Y as _}from"./vendor--Two-J8v.js";import{_ as C}from"./NexusLayout-hKbq2rpa.js";import{l as j}from"./lodash-Bix_WWwN.js";import"./app-i66EToh1.js";import"./DropdownLink-CFHk88F0.js";const M={class:"space-y-4 font-sans p-4 sm:p-6 max-w-[1920px] mx-auto"},S={class:"flex items-center gap-2 sm:gap-4 mb-2"},B={class:"flow-root rounded-xl sm:rounded-2xl border border-gray-200 bg-white shadow-sm overflow-hidden"},D={class:"border-b border-gray-200 bg-gray-50/80 px-4 sm:px-6"},L={class:"-mb-px flex space-x-6 sm:space-x-8 overflow-x-auto scrollbar-none","aria-label":"Tabs"},T=["onClick"],z=["d"],H={class:"bg-gray-50/50 border-b border-gray-200 px-4 py-3"},V={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3"},A={key:0,class:"flex items-center gap-2"},E={class:"relative"},U={key:0,id:"group-dropdown",class:"absolute left-0 z-20 mt-2 w-48 origin-top-left rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},P={class:"py-1"},I={key:1},O={class:"flex items-center gap-2 w-full sm:w-auto"},$={class:"relative flex-1 sm:flex-none"},N={key:0,class:"relative"},R={key:0,class:"absolute -top-1 -right-1 h-4 w-4 rounded-full bg-emerald-600 ring-2 ring-white text-[10px] text-white font-bold flex items-center justify-center"},F={key:0,id:"filter-dropdown",class:"absolute right-0 z-20 mt-2 w-72 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none p-4"},G={class:"space-y-4"},q=["value"],W=["value"],J={class:"relative"},K={key:0,class:"absolute right-0 z-20 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},Q={class:"py-1"},Y=["href"],X=["href"],Z={key:1,class:"relative"},ee={key:0,id:"column-dropdown",class:"absolute right-0 z-20 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},te={class:"p-2 space-y-1 max-h-80 overflow-y-auto"},re=["onUpdate:modelValue"],ae={class:"ml-2 text-sm text-gray-700 select-none"},se={key:0,class:"bg-emerald-50 border-b border-emerald-200 px-4 py-3"},le={class:"flex items-center justify-between"},ne={class:"text-sm text-emerald-700 font-medium"},oe={class:"block sm:hidden space-y-4 p-4 bg-gray-50/50"},ie={key:0,class:"py-2 flex items-center gap-2"},de={class:"font-bold text-sm text-gray-800 tracking-tight"},ce={class:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 flex flex-col gap-4"},ue={class:"flex justify-between items-start"},pe={class:"font-bold text-gray-900"},ge={class:"text-xs text-gray-500 mt-1"},me={class:"text-xs text-gray-500 mt-1 flex items-center gap-1"},xe={class:"font-medium text-emerald-600"},ye={class:"px-2.5 py-1 rounded-lg bg-blue-50 text-blue-600 text-[10px] font-bold uppercase tracking-wide ring-1 ring-blue-100"},ve={class:"grid grid-cols-2 gap-3"},be={class:"flex flex-col gap-1"},fe={class:"flex items-center gap-2"},he={class:"flex flex-col gap-1"},we={class:"text-xs font-semibold text-gray-700"},ke={key:0,class:"flex flex-col gap-1.5"},_e={class:"flex justify-between items-end"},Ce={class:"text-xs font-bold text-gray-700 bg-gray-100 px-2 py-0.5 rounded-md"},je={class:"w-full bg-gray-100 rounded-full h-2.5 overflow-hidden"},Me={class:"flex items-center gap-2 pt-3 border-t border-gray-50"},Se={class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Be=["d"],De={key:0,class:"flex flex-col items-center justify-center p-8 text-center"},Le={class:"hidden sm:block overflow-x-auto"},Te={class:"min-w-full divide-y divide-gray-200"},ze={class:"bg-gray-50/50"},He={key:0,scope:"col",class:"px-4 py-3"},Ve={key:0,scope:"col",class:"px-3 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap"},Ae={class:"divide-y divide-gray-100 bg-white"},Ee={key:0,class:"bg-gray-100"},Ue=["colspan"],Pe={class:"flex items-center gap-2"},Ie={class:"font-bold text-sm text-gray-800 tracking-tight"},Oe={class:"text-xs text-gray-500 font-medium bg-white px-1.5 py-0.5 rounded border border-gray-200 shadow-sm ml-auto"},$e={key:0,class:"px-4 py-4"},Ne=["value"],Re={key:1,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},Fe={key:2,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-900 font-medium"},Ge={key:3,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},qe={key:4,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},We={key:5,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},Je={key:6,class:"px-3 py-4 whitespace-nowrap text-xs"},Ke={key:7,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-900"},Qe={key:8,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-900 font-medium"},Ye={key:9,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},Xe={key:10,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},Ze={key:11,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},et={key:12,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},tt={key:13,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},rt={key:14,class:"px-3 py-4 whitespace-nowrap text-xs text-gray-500"},at={key:15,class:"px-3 py-4 whitespace-nowrap text-xs"},st={key:0,class:"flex flex-col items-center gap-1",style:{"min-width":"120px"}},lt={class:"w-full bg-gray-200 rounded-full h-2 overflow-hidden"},nt={class:"text-xs text-gray-600 font-medium"},ot={key:1,class:"text-gray-400"},it={key:16,class:"px-3 py-4 whitespace-nowrap text-xs"},dt={class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ct=["d"],ut={key:0},pt=["colspan"],gt={key:1,class:"border-t border-gray-200 px-4 py-3 sm:px-6 sm:py-4 flex flex-col sm:flex-row items-center justify-between gap-4"},mt={class:"flex flex-col xs:flex-row items-center gap-3 w-full sm:w-auto justify-between sm:justify-start"},xt={class:"text-xs text-gray-500 whitespace-nowrap"},yt={class:"font-medium"},vt={class:"font-medium"},bt={class:"font-medium"},ft={class:"flex items-center border border-gray-300 rounded-md overflow-hidden shadow-sm"},ht={key:0,class:"flex flex-wrap justify-center gap-1 w-full sm:w-auto"},wt=Object.assign({layout:C},{__name:"Index",props:{plans:Object,filters:Object,timeSettings:Object,customers:Array,users:Array,user_roles:Array},setup(C){const wt=C,kt=e(wt.filters?.search||""),_t=e(wt.filters?.customer_id||""),Ct=e(wt.filters?.user_id||""),jt=e(wt.filters?.group_by||"customer"),Mt=e(wt.filters?.perPage||"10"),St=e(wt.filters?.tab||"all"),Bt=e(wt.filters?.start_date||""),Dt=e(wt.filters?.end_date||""),Lt=e(!1),Tt=e([]),zt=e(!1),Ht=[{id:"all",name:"All Reports",icon:"M4 6h16M4 12h16M4 18h16"},{id:"on_track",name:"On Track",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"warning",name:"Warning",icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},{id:"failed",name:"Failed",icon:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"completed",name:"Completed",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"history",name:"History",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}],Vt=j.throttle(()=>{Lt.value=!0,t.get(route("planning-report.index"),{search:kt.value,customer_id:_t.value,user_id:Ct.value,group_by:jt.value,tab:St.value,perPage:Mt.value,start_date:Bt.value,end_date:Dt.value,page:1},{preserveState:!0,preserveScroll:!0,replace:!0,only:["plans","filters"],onFinish:()=>{Lt.value=!1}})},300);r([kt,_t,Ct,jt,Mt,Bt,Dt],()=>{Vt()});const At=a(()=>wt.user_roles&&wt.user_roles.includes("Super Admin")),Et=a(()=>!!At.value||wt.user_roles&&(wt.user_roles.includes("Manager")||wt.user_roles.includes("Board of Director"))),Ut=e([{key:"no",label:"No",visible:!0},{key:"activity_code",label:"Code",visible:!0},{key:"created_at",label:"Input Time",visible:!0},{key:"updated_at",label:"Last Update",visible:!0},{key:"planning_date",label:"Activity Date",visible:!0},{key:"status",label:"Lifecycle Status",visible:!0},{key:"user",label:"Sales / Marketing",visible:!0},{key:"company",label:"Company",visible:!0},{key:"project",label:"Project",visible:!0},{key:"pic",label:"Customer PIC",visible:!0},{key:"position",label:"Position",visible:!0},{key:"location",label:"Location",visible:!0},{key:"product",label:"Product",visible:!0},{key:"activity",label:"Activity",visible:!0},{key:"progress",label:"Progress",visible:!0},{key:"update_status",label:"Update Status",visible:!0}]),Pt=e(!1),It=e(!1),Ot=e(!1),$t=e(!1),Nt=()=>Pt.value=!Pt.value,Rt=()=>It.value=!It.value,Ft=()=>Ot.value=!Ot.value,Gt=e=>{jt.value=e,Pt.value=!1};window.addEventListener("click",e=>{const t=document.getElementById("column-dropdown"),r=document.getElementById("column-dropdown-button");Ot.value&&t&&!t.contains(e.target)&&!r.contains(e.target)&&(Ot.value=!1);const a=document.getElementById("group-dropdown"),s=document.getElementById("group-dropdown-button");Pt.value&&a&&!a.contains(e.target)&&!s.contains(e.target)&&(Pt.value=!1);const l=document.getElementById("filter-dropdown"),n=document.getElementById("filter-dropdown-button");It.value&&l&&!l.contains(e.target)&&!n.contains(e.target)&&(It.value=!1)});const qt=a(()=>{let e=0;return _t.value&&e++,Ct.value&&e++,e});a(()=>Ut.value.reduce((e,t)=>(e[t.key]=t.visible,e),{}));const Wt=(e,t=!1)=>{if(!e)return"-";const r=new Date(e);return t?r.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):r.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"})},Jt=e=>{if("reported"===e.status||"success"===e.status||"failed"===e.status)return"bg-green-100 text-green-800";if(!wt.timeSettings)return"bg-gray-100 text-gray-800";const t=wt.timeSettings.planning_time_unit||"Days (Production)",r=wt.timeSettings.planning_warning_threshold||14,a=wt.timeSettings.testing_time_offset||0,s=(new Date).getTime()+24*a*60*60*1e3,l=e.planning_date?e.planning_date.split("T")[0]:null,n=new Date(s).toISOString().split("T")[0];if(l&&l>n)return"bg-blue-100 text-blue-800";let o=s-(l?new Date(l+"T23:59:59").getTime():new Date(e.created_at).getTime());if(o<0)return"bg-blue-100 text-blue-800";let i=0;return i="Hours"===t?o/36e5:"Minutes"===t?o/6e4:o/864e5,i>=r?"bg-red-100 text-red-800 animate-pulse":"bg-blue-100 text-blue-800"},Kt=e=>{if(e.is_history)return{label:"History",class:"bg-gray-100 text-gray-800",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"};if("reported"===e.status||"success"===e.status||"failed"===e.status)return{label:"Completed",class:"bg-emerald-100 text-emerald-800 font-medium",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"};if(!wt.timeSettings)return{label:"On Track",class:"bg-green-100 text-green-800",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"};wt.timeSettings.planning_time_unit,wt.timeSettings.planning_warning_threshold;const t=wt.timeSettings.plan_expiry_value||7,r=wt.timeSettings.plan_expiry_unit||"Days (Production)",a=wt.timeSettings.testing_time_offset||0,s=(new Date).getTime()+24*a*60*60*1e3,l=e.planning_date?e.planning_date.split("T")[0]:null,n=new Date(s).toISOString().split("T")[0];if(l&&l>n)return{label:"Scheduled",class:"bg-blue-100 text-blue-800",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"};const o=s-(l?new Date(l+"T23:59:59").getTime():new Date(e.created_at).getTime());if(o<0)return{label:"On Track",class:"bg-green-100 text-green-800",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"};let i=0;return i="Hours"===r?o/36e5:"Minutes"===r?o/6e4:o/864e5,"created"===e.status&&i>=t&&i>0?{label:"Expired",class:"bg-red-100 text-red-800 font-bold",icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}:{label:"On Track",class:"bg-green-100 text-green-800",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}},Qt=e=>{if(e.report&&e.report.execution_date){if(new Date(e.report.execution_date).setHours(0,0,0,0)>new Date(e.planning_date).setHours(0,0,0,0))return{label:"Late Report",class:"bg-yellow-100 text-yellow-800 border-yellow-200"}}if("success"===e.bod_status)return{label:"Success",class:"bg-emerald-100 text-emerald-800 border-emerald-200"};if("failed"===e.bod_status)return{label:"Failed",class:"bg-red-100 text-red-800 border-red-200"};if("expired"===e.lifecycle_status||"created"===e.status&&Jt(e).includes("animate-pulse"))return{label:"Expired",class:"bg-gray-100 text-gray-800 border-gray-200"};const t=wt.timeSettings?.plan_expiry_value||7,r=wt.timeSettings?.plan_expiry_unit||"Days",a=wt.timeSettings?.testing_time_offset||0,s=(new Date).getTime()+24*a*60*60*1e3,l=e.planning_date?e.planning_date.split("T")[0]:null,n=new Date(s).toISOString().split("T")[0];if(l&&l>n)return{label:"Scheduled",class:"bg-blue-100 text-blue-800 border-blue-200"};let o=s-(l?new Date(l+"T23:59:59").getTime():new Date(e.created_at).getTime());if(o<0);else{let a=0;if(a="Hours"===r?o/36e5:"Minutes"===r?o/6e4:o/864e5,"created"===e.status&&a>=t&&a>0)return{label:"Expired",class:"bg-gray-800 text-white border-gray-600"}}return"rejected"===e.manager_status?{label:"Rejected",class:"bg-rose-100 text-rose-800 border-rose-200"}:"escalated"===e.manager_status?{label:"Escalated",class:"bg-amber-100 text-amber-800 border-amber-200"}:"approved"===e.manager_status?"pending"!==e.bod_status&&e.bod_status?{label:"Approved",class:"bg-blue-100 text-blue-800 border-blue-200"}:{label:"Awaiting BOD",class:"bg-blue-100 text-blue-800 border-blue-200"}:"reported"===e.status?"pending"!==e.manager_status&&e.manager_status?{label:"Reported",class:"bg-cyan-100 text-cyan-800 border-cyan-200"}:{label:"Pending Review",class:"bg-cyan-100 text-cyan-800 border-cyan-200"}:{label:"Created",class:"bg-slate-100 text-slate-800 border-slate-200"}},Yt=a(()=>wt.plans.links.filter(e=>!e.label.includes("&laquo;")&&!e.label.includes("&raquo;"))),Xt=()=>{zt.value?Tt.value=wt.plans.data.map(e=>e.id):Tt.value=[]},Zt=()=>{confirm("Are you sure you want to delete the selected plans?")&&t.delete(route("planning-report.bulk-destroy"),{data:{ids:Tt.value},preserveScroll:!0,onSuccess:()=>{Tt.value=[],zt.value=!1}})},er=e=>{if(!e)return null;const t=String(e),r=t.includes("Closing");if(t.includes("-")){const e=t.split("-"),a=e[0].trim().replace("%",""),s=parseInt(a)||0,l=e.slice(1).join("-").trim().replace("%","");return{percentage:s,text:l?`${s}% - ${l}`:`${s}%`,isClosing:r}}const a=parseInt(String(e).replace("%",""))||0;return{percentage:a,text:`${a}%`,isClosing:r}};return(e,t)=>(k(),s(g,null,[l(o(i),{title:"Planning Report"}),n("div",M,[n("div",S,[At.value?c("",!0):(k(),d(o(p),{key:0,href:e.route("dashboard"),class:"hidden lg:inline-flex group items-center gap-2 px-4 py-2 rounded-xl bg-white border border-gray-200 shadow-sm hover:shadow hover:border-gray-300 text-gray-600 hover:text-gray-900 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 active:scale-[0.98]"},{default:u(()=>[...t[11]||(t[11]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-4 h-4 group-hover:-translate-x-0.5 transition-transform duration-200"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})],-1),n("span",{class:"text-xs sm:text-sm font-bold"},"Back",-1)])]),_:1},8,["href"])),t[12]||(t[12]=n("h2",{class:"text-[24px] leading-[32px] font-bold text-gray-900"},"Planning Report",-1))]),n("div",B,[n("div",D,[n("nav",L,[(k(),s(g,null,m(Ht,e=>n("button",{key:e.id,onClick:t=>{return r=e.id,St.value=r,void Vt();var r},class:y([St.value===e.id?"border-emerald-500 text-emerald-600 font-bold bg-emerald-50/50":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 font-medium","whitespace-nowrap border-b-2 py-4 px-2 text-sm transition-all duration-200 flex items-center gap-2"])},[(k(),s("svg",{class:y(["h-4 w-4",St.value===e.id?"text-emerald-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:e.icon},null,8,z)],2)),x(" "+f(e.name),1)],10,T)),64))])]),n("div",H,[n("div",V,[Et.value?(k(),s("div",A,[n("div",E,[n("button",{id:"group-dropdown-button",onClick:Nt,type:"button",class:"inline-flex items-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 transition-colors"},[...t[13]||(t[13]=[n("svg",{class:"h-4 w-4 text-gray-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})],-1),x(" Group by ",-1),n("svg",{class:"-mr-0.5 h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[n("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})],-1)])]),Pt.value?(k(),s("div",U,[n("div",P,[n("button",{onClick:t[0]||(t[0]=e=>Gt("")),class:y(["flex w-full items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",{"bg-gray-50 text-emerald-600 font-semibold":""===jt.value}])}," None ",2),n("button",{onClick:t[1]||(t[1]=e=>Gt("customer")),class:y(["flex w-full items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",{"bg-gray-50 text-emerald-600 font-semibold":"customer"===jt.value}])}," Customer ",2)])])):c("",!0)])])):(k(),s("div",I)),n("div",O,[n("div",$,[t[14]||(t[14]=n("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4"},[n("svg",{class:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[n("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])],-1)),v(n("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>kt.value=e),type:"text",placeholder:"Search",class:"block w-full sm:w-64 rounded-xl border-0 py-3.5 sm:py-2.5 pl-11 sm:pl-10 pr-3 text-sm text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-600 transition-shadow"},null,512),[[b,kt.value]])]),Et.value?(k(),s("div",N,[n("button",{id:"filter-dropdown-button",onClick:Rt,type:"button",class:"relative inline-flex items-center justify-center rounded-md bg-white p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-50 ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-600"},[t[15]||(t[15]=n("span",{class:"sr-only"},"Filters",-1)),t[16]||(t[16]=n("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})],-1)),qt.value>0?(k(),s("span",R,f(qt.value),1)):c("",!0)]),It.value?(k(),s("div",F,[n("div",G,[n("div",null,[t[18]||(t[18]=n("label",{for:"customer",class:"block text-sm font-medium leading-6 text-gray-900"},"Customer",-1)),v(n("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>_t.value=e),id:"customer",class:"mt-1 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-emerald-600 sm:text-sm sm:leading-6"},[t[17]||(t[17]=n("option",{value:""},"All Customers",-1)),(k(!0),s(g,null,m(C.customers,e=>(k(),s("option",{key:e.id,value:e.id},f(e.company_name),9,q))),128))],512),[[h,_t.value]])]),n("div",null,[t[20]||(t[20]=n("label",{for:"user",class:"block text-sm font-medium leading-6 text-gray-900"},"User",-1)),v(n("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>Ct.value=e),id:"user",class:"mt-1 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-emerald-600 sm:text-sm sm:leading-6"},[t[19]||(t[19]=n("option",{value:""},"All Users",-1)),(k(!0),s(g,null,m(C.users,e=>(k(),s("option",{key:e.id,value:e.id},f(e.name),9,W))),128))],512),[[h,Ct.value]])]),n("div",null,[t[21]||(t[21]=n("label",{for:"start_date",class:"block text-sm font-medium leading-6 text-gray-900"},"Start Date",-1)),v(n("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>Bt.value=e),id:"start_date",class:"mt-1 block w-full rounded-md border-0 py-1.5 pl-3 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-emerald-600 sm:text-sm sm:leading-6"},null,512),[[b,Bt.value]])]),n("div",null,[t[22]||(t[22]=n("label",{for:"end_date",class:"block text-sm font-medium leading-6 text-gray-900"},"End Date",-1)),v(n("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=e=>Dt.value=e),id:"end_date",class:"mt-1 block w-full rounded-md border-0 py-1.5 pl-3 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-emerald-600 sm:text-sm sm:leading-6"},null,512),[[b,Dt.value]])])])])):c("",!0)])):c("",!0),n("div",J,[n("button",{onClick:t[7]||(t[7]=()=>{$t.value=!$t.value}),type:"button",class:"relative inline-flex items-center justify-center rounded-md bg-white p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-50 ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-600"},[...t[23]||(t[23]=[n("span",{class:"sr-only"},"Export",-1),n("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})],-1)])]),$t.value?(k(),s("div",K,[n("div",Q,[n("a",{href:`/planning-report/export-excel?tab=${St.value}&search=${kt.value}&start_date=${Bt.value}&end_date=${Dt.value}`,class:"flex items-center gap-x-3 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...t[24]||(t[24]=[n("svg",{class:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),x(" Export to Excel ",-1)])],8,Y),n("a",{href:`/planning-report/export-pdf?tab=${St.value}&search=${kt.value}&start_date=${Bt.value}&end_date=${Dt.value}`,class:"flex items-center gap-x-3 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[...t[25]||(t[25]=[n("svg",{class:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),x(" Export to PDF ",-1)])],8,X)])])):c("",!0)]),Et.value?(k(),s("div",Z,[n("button",{id:"column-dropdown-button",onClick:Ft,type:"button",class:"relative inline-flex items-center justify-center rounded-md bg-white p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-50 ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-600"},[...t[26]||(t[26]=[n("span",{class:"sr-only"},"Columns",-1),n("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v13.5c0 .621.504 1.125 1.125 1.125z"})],-1)])]),Ot.value?(k(),s("div",ee,[n("div",te,[(k(!0),s(g,null,m(Ut.value,e=>(k(),s("label",{key:e.key,class:"flex items-center px-2 py-1.5 hover:bg-gray-100 rounded cursor-pointer"},[v(n("input",{type:"checkbox","onUpdate:modelValue":t=>e.visible=t,class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-600"},null,8,re),[[w,e.visible]]),n("span",ae,f(e.label),1)]))),128))])])):c("",!0)])):c("",!0)])])]),Tt.value.length>0&&At.value?(k(),s("div",se,[n("div",le,[n("div",ne,f(Tt.value.length)+" item(s) selected ",1),n("button",{onClick:Zt,class:"inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 transition-colors"},[...t[27]||(t[27]=[n("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),x(" Delete Selected ",-1)])])])])):c("",!0),n("div",oe,[(k(!0),s(g,null,m(C.plans.data,(e,r)=>(k(),s(g,{key:e.id},["customer"!==jt.value||0!==r&&e.customer?.id===C.plans.data[r-1]?.customer?.id?c("",!0):(k(),s("div",ie,[t[28]||(t[28]=n("span",{class:"inline-flex items-center justify-center p-1 rounded bg-white shadow-sm ring-1 ring-gray-200"},[n("svg",{class:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),n("span",de,f(e.customer?.company_name||"Unknown Company"),1)])),n("div",ce,[n("div",ue,[n("div",null,[n("h3",pe,f(e.customer?.company_name||"Unknown Company"),1),n("p",ge,f(e.project_name||"-"),1),n("p",me,[t[29]||(t[29]=n("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),n("span",xe,f(e.user?.name||"-"),1)])]),n("span",ye,f(e.product?.name||"-"),1)]),n("div",ve,[n("div",be,[t[30]||(t[30]=n("span",{class:"text-[10px] uppercase font-bold text-gray-400"},"Activity",-1)),n("div",fe,[n("span",{class:y(["px-2.5 py-1.5 rounded-lg text-xs font-bold shadow-sm",Jt(e)])},f(e.activity_code),3)])]),n("div",he,[t[31]||(t[31]=n("span",{class:"text-[10px] uppercase font-bold text-gray-400"},"Date",-1)),n("span",we,f(Wt(e.planning_date)),1)])]),e.report?.progress?(k(),s("div",ke,[n("div",_e,[t[32]||(t[32]=n("span",{class:"text-[10px] uppercase font-bold text-gray-400"},"Progress",-1)),n("span",Ce,f(er(e.report.progress).text),1)]),n("div",je,[n("div",{class:y(["h-full rounded-full transition-all duration-500",{"bg-gray-800":er(e.report.progress).isClosing,"bg-red-500":!er(e.report.progress).isClosing&&er(e.report.progress).percentage<30,"bg-yellow-500":!er(e.report.progress).isClosing&&er(e.report.progress).percentage>=30&&er(e.report.progress).percentage<70,"bg-green-500":!er(e.report.progress).isClosing&&er(e.report.progress).percentage>=70}]),style:_({width:er(e.report.progress).percentage+"%"})},null,6)])])):c("",!0),n("div",Me,[n("span",{class:y(["px-2 py-1 rounded text-[10px] font-bold border uppercase",Qt(e).class])},f(Qt(e).label),3),n("span",{class:y(["inline-flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium",Kt(e).class])},[(k(),s("svg",Se,[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:Kt(e).icon},null,8,Be)])),x(" "+f(Kt(e).label),1)],2)])])],64))),128)),0===C.plans.data.length?(k(),s("div",De,[...t[33]||(t[33]=[n("div",{class:"h-16 w-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-4"},[n("svg",{class:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1),n("p",{class:"text-gray-500 text-sm font-medium"},"No reports found",-1)])])):c("",!0)]),n("div",Le,[n("table",Te,[n("thead",ze,[n("tr",null,[At.value?(k(),s("th",He,[v(n("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>zt.value=e),onChange:Xt,class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-600"},null,544),[[w,zt.value]])])):c("",!0),(k(!0),s(g,null,m(Ut.value,e=>(k(),s(g,{key:e.key},[e.visible?(k(),s("th",Ve,f(e.label),1)):c("",!0)],64))),128))])]),n("tbody",Ae,[(k(!0),s(g,null,m(C.plans.data,(e,r)=>(k(),s(g,{key:e.id},["customer"!==jt.value||0!==r&&e.customer?.id===C.plans.data[r-1]?.customer?.id?c("",!0):(k(),s("tr",Ee,[n("td",{colspan:Ut.value.filter(e=>e.visible).length+(At.value?1:0),class:"px-4 py-2"},[n("div",Pe,[t[34]||(t[34]=n("span",{class:"inline-flex items-center justify-center p-1 rounded bg-white shadow-sm ring-1 ring-gray-200"},[n("svg",{class:"w-4 h-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),n("span",Ie,f(e.customer?.company_name||"Unknown Company"),1),n("span",Oe,f(C.plans.data.filter(t=>t.customer?.id===e.customer?.id).length)+" Entries (Page) ",1)])],8,Ue)])),n("tr",{class:y(["hover:bg-gray-50/60 transition-colors",{"bg-emerald-50/30":Tt.value.includes(e.id)}])},[At.value?(k(),s("td",$e,[v(n("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[9]||(t[9]=e=>Tt.value=e),class:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-600"},null,8,Ne),[[w,Tt.value]])])):c("",!0),Ut.value.find(e=>"no"===e.key).visible?(k(),s("td",Re,f((C.plans.from||1)+r),1)):c("",!0),Ut.value.find(e=>"activity_code"===e.key).visible?(k(),s("td",Fe,[n("span",{class:y(["px-2 py-1 rounded-md text-xs font-semibold",Jt(e)])},f(e.activity_code),3)])):c("",!0),Ut.value.find(e=>"created_at"===e.key).visible?(k(),s("td",Ge,f(Wt(e.created_at,!0)),1)):c("",!0),Ut.value.find(e=>"updated_at"===e.key).visible?(k(),s("td",qe,f(Wt(e.updated_at,!0)),1)):c("",!0),Ut.value.find(e=>"planning_date"===e.key).visible?(k(),s("td",We,f(Wt(e.planning_date)),1)):c("",!0),Ut.value.find(e=>"status"===e.key).visible?(k(),s("td",Je,[n("span",{class:y(["px-2.5 py-1 rounded-md text-xs font-bold border shadow-sm uppercase tracking-wide",Qt(e).class])},f(Qt(e).label),3)])):c("",!0),Ut.value.find(e=>"user"===e.key).visible?(k(),s("td",Ke,f(e.user?.name||"-"),1)):c("",!0),Ut.value.find(e=>"company"===e.key).visible?(k(),s("td",Qe,f(e.customer?.company_name||"-"),1)):c("",!0),Ut.value.find(e=>"project"===e.key).visible?(k(),s("td",Ye,f(e.project_name||"-"),1)):c("",!0),Ut.value.find(e=>"pic"===e.key).visible?(k(),s("td",Xe,f(e.report?.pic||"-"),1)):c("",!0),Ut.value.find(e=>"position"===e.key).visible?(k(),s("td",Ze,f(e.report?.position||"-"),1)):c("",!0),Ut.value.find(e=>"location"===e.key).visible?(k(),s("td",et,f(e.report?.location||"-"),1)):c("",!0),Ut.value.find(e=>"product"===e.key).visible?(k(),s("td",tt,f(e.product?.name||"-"),1)):c("",!0),Ut.value.find(e=>"activity"===e.key).visible?(k(),s("td",rt,f(e.activity_type||"-"),1)):c("",!0),Ut.value.find(e=>"progress"===e.key).visible?(k(),s("td",at,[e.report?.progress&&er(e.report.progress)?(k(),s("div",st,[n("div",lt,[n("div",{class:y(["h-full rounded-full transition-all duration-300",{"bg-gray-800":er(e.report.progress).isClosing,"bg-red-500":!er(e.report.progress).isClosing&&er(e.report.progress).percentage<30,"bg-yellow-500":!er(e.report.progress).isClosing&&er(e.report.progress).percentage>=30&&er(e.report.progress).percentage<70,"bg-green-500":!er(e.report.progress).isClosing&&er(e.report.progress).percentage>=70}]),style:_({width:er(e.report.progress).percentage+"%"})},null,6)]),n("span",nt,f(er(e.report.progress).text),1)])):(k(),s("span",ot,"-"))])):c("",!0),Ut.value.find(e=>"update_status"===e.key).visible?(k(),s("td",it,[n("span",{class:y(["inline-flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-semibold",Kt(e).class])},[(k(),s("svg",dt,[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:Kt(e).icon},null,8,ct)])),x(" "+f(Kt(e).label),1)],2)])):c("",!0)],2)],64))),128)),0===C.plans.data.length?(k(),s("tr",ut,[n("td",{colspan:Ut.value.filter(e=>e.visible).length,class:"px-6 py-12 text-center text-sm text-gray-500"}," No planning reports found ",8,pt)])):c("",!0)])])]),C.plans.links?(k(),s("div",gt,[n("div",mt,[n("div",xt,[t[35]||(t[35]=x(" Showing ",-1)),n("span",yt,f(C.plans.from||1),1),t[36]||(t[36]=x(" to ",-1)),n("span",vt,f(C.plans.to||C.plans.total),1),t[37]||(t[37]=x(" of ",-1)),n("span",bt,f(C.plans.total),1)]),n("div",ft,[t[39]||(t[39]=n("div",{class:"px-3 py-1.5 text-xs font-medium text-slate-500 bg-slate-50 border-r border-gray-300 whitespace-nowrap"}," Per page ",-1)),v(n("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>Mt.value=e),class:"border-none py-1.5 pl-2 pr-8 text-xs font-medium text-gray-700 bg-white focus:ring-0 cursor-pointer hover:bg-gray-50 transition-colors"},[...t[38]||(t[38]=[n("option",{value:"10"},"10",-1),n("option",{value:"25"},"25",-1),n("option",{value:"50"},"50",-1),n("option",{value:"all"},"All",-1)])],512),[[h,Mt.value]])])]),C.plans.links&&C.plans.links.length>3&&"all"!==Mt.value?(k(),s("div",ht,[C.plans.first_page_url?(k(),d(o(p),{key:0,href:C.plans.first_page_url,class:y(["p-1 rounded-md text-gray-400 hover:text-emerald-600 hover:bg-gray-50 transition-colors",{"pointer-events-none opacity-50":1===C.plans.current_page}])},{default:u(()=>[...t[40]||(t[40]=[n("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"})],-1)])]),_:1},8,["href","class"])):c("",!0),C.plans.prev_page_url?(k(),d(o(p),{key:1,href:C.plans.prev_page_url,class:"p-1 rounded-md text-gray-400 hover:text-emerald-600 hover:bg-gray-50 transition-colors"},{default:u(()=>[...t[41]||(t[41]=[n("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})],-1)])]),_:1},8,["href"])):c("",!0),(k(!0),s(g,null,m(Yt.value,(e,t)=>(k(),d(o(p),{key:t,href:e.url??"#",class:y(["px-3 py-1 rounded-md text-xs font-medium transition-colors border",e.active?"bg-emerald-600 text-white border-emerald-600":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128)),C.plans.next_page_url?(k(),d(o(p),{key:2,href:C.plans.next_page_url,class:"p-1 rounded-md text-gray-400 hover:text-emerald-600 hover:bg-gray-50 transition-colors"},{default:u(()=>[...t[42]||(t[42]=[n("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1)])]),_:1},8,["href"])):c("",!0),C.plans.last_page_url?(k(),d(o(p),{key:3,href:C.plans.last_page_url,class:y(["p-1 rounded-md text-gray-400 hover:text-emerald-600 hover:bg-gray-50 transition-colors",{"pointer-events-none opacity-50":C.plans.current_page===C.plans.last_page}])},{default:u(()=>[...t[43]||(t[43]=[n("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"})],-1)])]),_:1},8,["href","class"])):c("",!0)])):c("",!0)])):c("",!0)])])],64))}});export{wt as default};
