import{_ as e}from"./NexusLayout-CLh_WktA.js";import{r as t,e as s,a as l,v as a,E as r,G as o,u as n,H as i,K as d,m as p,J as x,L as y,F as c,V as u,W as g,y as m}from"./vendor-COFecK3v.js";import"./app-CPptz1bH.js";import"./DropdownLink-CM7j1Xqm.js";const h={class:"space-y-6"},v={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},f={class:"flex gap-2 w-full md:w-auto"},b={class:"ml-1 bg-emerald-500 text-white px-1.5 py-0.5 rounded-full text-xs"},w={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},k={class:"overflow-x-auto"},_={class:"w-full text-left text-sm text-gray-600"},j={class:"divide-y divide-gray-100"},L={key:0},U={class:"px-6 py-4 font-medium text-gray-900"},A={class:"text-xs text-gray-400 font-normal"},C={class:"px-6 py-4"},M={class:"px-6 py-4 font-mono text-xs"},O={class:"px-6 py-4"},S={class:"inline-flex items-center px-2 py-1 rounded bg-gray-100 text-xs font-medium text-gray-600"},T={class:"px-6 py-4"},H={class:"px-6 py-4"},I={key:1},D={class:"flex justify-end mb-4"},N={class:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"},P={class:"overflow-x-auto"},V={class:"w-full text-left text-sm text-gray-600"},B={class:"divide-y divide-gray-100"},E={key:0},F={class:"px-6 py-4 font-medium text-gray-900"},G={class:"px-6 py-4 font-mono text-xs"},J={class:"px-6 py-4"},K={class:"px-6 py-4"},W={class:"px-6 py-4 text-gray-500"},q=Object.assign({layout:e},{__name:"OnlineUsers",props:{onlineUsers:Array,history:Array},setup(e){const q=()=>{confirm("Are you sure you want to clear all login history? This cannot be undone.")&&g.delete(route("security.online.clear"),{preserveScroll:!0,preserveState:!0})},z=t("online");let Q=null;return s(()=>{Q=setInterval(()=>{"online"===z.value&&g.reload({only:["onlineUsers"],preserveScroll:!0,preserveState:!0})},5e3)}),l(()=>{Q&&clearInterval(Q)}),(t,s)=>(m(),a(c,null,[r(n(i),{title:"Online Monitoring"}),o("div",h,[o("div",v,[s[3]||(s[3]=o("h2",{class:"text-2xl font-bold text-gray-800"},"Online Monitoring",-1)),o("div",f,[o("button",{onClick:s[0]||(s[0]=e=>z.value="online"),class:p(["px-4 py-2 rounded-lg text-sm font-bold transition-all flex-1 md:flex-none justify-center","online"===z.value?"bg-emerald-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-50"])},[s[2]||(s[2]=x(" Active Users ",-1)),o("span",b,y(e.onlineUsers.length),1)],2),o("button",{onClick:s[1]||(s[1]=e=>z.value="history"),class:p(["px-4 py-2 rounded-lg text-sm font-bold transition-all flex-1 md:flex-none justify-center","history"===z.value?"bg-emerald-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-50"])}," History ",2)])]),"online"===z.value?(m(),a("div",w,[o("div",k,[o("table",_,[s[6]||(s[6]=o("thead",{class:"bg-gray-50 text-xs uppercase font-semibold text-gray-500"},[o("tr",null,[o("th",{class:"px-6 py-4"},"User"),o("th",{class:"px-6 py-4"},"Team"),o("th",{class:"px-6 py-4"},"IP Address"),o("th",{class:"px-6 py-4"},"Device"),o("th",{class:"px-6 py-4"},"Login Time"),o("th",{class:"px-6 py-4"},"Last Activity"),o("th",{class:"px-6 py-4"},"Status")])],-1)),o("tbody",j,[0===e.onlineUsers.length?(m(),a("tr",L,[...s[4]||(s[4]=[o("td",{colspan:"7",class:"px-6 py-8 text-center text-gray-400"},"No active users found (besides you maybe?)",-1)])])):d("",!0),(m(!0),a(c,null,u(e.onlineUsers,e=>(m(),a("tr",{key:e.id,class:"hover:bg-gray-50/50 transition-colors"},[o("td",U,[o("div",null,y(e.user_name),1),o("div",A,y(e.user_email),1)]),o("td",C,y(e.team),1),o("td",M,y(e.ip_address),1),o("td",O,[o("span",S,y(e.platform),1)]),o("td",T,y(e.login_at),1),o("td",H,y(e.last_activity),1),s[5]||(s[5]=o("td",{class:"px-6 py-4"},[o("span",{class:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 border border-emerald-100"},[o("span",{class:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),x(" Online ")])],-1))]))),128))])])])])):d("",!0),"history"===z.value?(m(),a("div",I,[o("div",D,[e.history.length>0?(m(),a("button",{key:0,onClick:q,class:"flex items-center gap-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors font-semibold text-sm"},[...s[7]||(s[7]=[o("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),x(" Clear History ",-1)])])):d("",!0)]),o("div",N,[o("div",P,[o("table",V,[s[9]||(s[9]=o("thead",{class:"bg-gray-50 text-xs uppercase font-semibold text-gray-500"},[o("tr",null,[o("th",{class:"px-6 py-4"},"User"),o("th",{class:"px-6 py-4"},"IP Address"),o("th",{class:"px-6 py-4"},"Login Time"),o("th",{class:"px-6 py-4"},"Logout Time"),o("th",{class:"px-6 py-4"},"Duration")])],-1)),o("tbody",B,[0===e.history.length?(m(),a("tr",E,[...s[8]||(s[8]=[o("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-400"},"No login history available.",-1)])])):d("",!0),(m(!0),a(c,null,u(e.history,e=>(m(),a("tr",{key:e.id,class:"hover:bg-gray-50/50 transition-colors"},[o("td",F,y(e.user_name),1),o("td",G,y(e.ip_address),1),o("td",J,y(e.login_at),1),o("td",K,y(e.logout_at),1),o("td",W,y(e.duration),1)]))),128))])])])])])):d("",!0)])],64))}});export{q as default};
