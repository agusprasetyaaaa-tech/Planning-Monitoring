import{c as e,r as t,v as a,G as r,C as s,x as l,L as n,F as o,V as i,m as d,K as c,Y as p,E as u,D as g,y as m,J as x,R as v,T as b,X as f,B as h,w as y,W as w,a as _,e as k,u as j,H as C,O as M,M as S,N as A,U as D,Z as T,I as B,q as L}from"./vendor--Two-J8v.js";import{_ as O}from"./NexusLayout-hKbq2rpa.js";import{l as N}from"./lodash-Bix_WWwN.js";import{_ as I}from"./Modal-BxRLw6sk.js";import{b as V}from"./DropdownLink-CFHk88F0.js";import{_ as P}from"./app-i66EToh1.js";import{Y as E,h as z,G as H,V as R,S as F,a as U}from"./ui-Nlo8Y17Y.js";const Z={class:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden"},W={class:"p-6 bg-gradient-to-br from-white to-gray-50/50 border-b border-gray-100 flex flex-col md:flex-row justify-between items-start md:items-center gap-6"},Y={class:"flex flex-col gap-4 w-full md:w-auto"},q={class:"flex items-center justify-between gap-4"},J={class:"text-xl sm:text-2xl font-black text-slate-800 tracking-tight flex items-center gap-2"},$={class:"text-emerald-600"},G={class:"text-slate-400"},X={class:"flex items-center gap-1 bg-white border border-slate-200 p-1 rounded-2xl shadow-sm"},K={class:"text-[10px] sm:text-xs text-slate-500 font-bold inline-flex items-center gap-1.5 bg-slate-100 px-3 py-1.5 rounded-full w-fit"},Q={class:"text-slate-700"},ee={class:"grid grid-cols-7 border-b border-gray-100 bg-gray-50/50"},te={class:"grid grid-cols-7 auto-rows-[minmax(160px,auto)] md:auto-rows-[minmax(140px,auto)] mobile:auto-rows-[minmax(110px,auto)]"},ae={class:"flex justify-between items-start mb-1.5 mobile:mb-1"},re=["onClick"],se={class:"space-y-1.5 md:space-y-2 max-h-[160px] md:max-h-[180px] mobile:max-h-[120px] overflow-y-auto custom-scrollbar pr-0.5"},le=["onClick","onMouseenter"],ne={class:"flex items-center gap-2"},oe={class:"truncate leading-tight flex-1 text-left text-[9px] md:text-[10px] font-bold tracking-tight"},ie={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 group-hover:opacity-10 transition-opacity"},de={class:"bg-slate-900/90 backdrop-blur-xl text-white p-4 rounded-[1.5rem] shadow-2xl border border-white/10 w-60 md:w-64 overflow-hidden relative group"},ce={class:"flex flex-col gap-3 relative z-10"},pe={class:"flex justify-between items-center"},ue={class:"px-2.5 py-0.5 bg-white/10 backdrop-blur-md text-emerald-400 text-[8px] font-black rounded-full uppercase tracking-[0.1em] border border-white/5"},ge={class:"flex items-center gap-1.5 text-[9px] text-slate-400 font-bold bg-white/5 px-2 py-0.5 rounded-full"},me={class:"space-y-0.5"},xe={class:"text-lg font-black text-white leading-[1.1] tracking-tight"},ve={class:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-emerald-500/10 text-emerald-400 text-[9px] font-bold rounded-lg border border-emerald-500/20"},be={key:0,class:"bg-white/5 p-3 rounded-xl border border-white/5 text-[11px] text-slate-300 leading-relaxed font-medium"},fe={class:"flex items-center justify-between pt-1.5 border-t border-white/5"},he={class:"flex items-center gap-1.5"},ye={class:"w-1.5 h-1.5 rounded-full relative"},we={class:"text-[9px] font-black uppercase text-slate-400 tracking-widest"},_e={__name:"NexusCalendar",props:{customers:{type:Array,required:!0},month:{type:Number,required:!0},year:{type:Number,required:!0},getStatus:{type:Function,required:!0},getBlinkStyle:{type:Function,required:!0}},emits:["open-detail","create-plan","change-month"],setup(f,{emit:h}){const y=f,w=h,_=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=e(()=>{const e=[],t=new Date(y.year,y.month-1,1).getDay(),a=new Date(y.year,y.month,0).getDate(),r=new Date(y.year,y.month-1,0).getDate();for(let l=t-1;l>=0;l--)e.push({day:r-l,currentMonth:!1,date:new Date(y.year,y.month-2,r-l)});for(let l=1;l<=a;l++)e.push({day:l,currentMonth:!0,date:new Date(y.year,y.month-1,l)});const s=42-e.length;for(let l=1;l<=s;l++)e.push({day:l,currentMonth:!1,date:new Date(y.year,y.month,l)});return e}),j=e=>{const t=e.toISOString().split("T")[0],a=[];return y.customers.forEach(e=>{e.plans&&e.plans.forEach(r=>{r.planning_date&&r.planning_date.startsWith(t)&&a.push({...r,customer:e})})}),a.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at))},C=e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},M=["January","February","March","April","May","June","July","August","September","October","November","December"],S=e(()=>(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),A=e=>{const t="px-2 py-1 rounded-lg text-[10px] mobile:text-[9px] font-bold transition-all duration-300 shadow-sm border border-black/5 ";switch(e){case"none":default:return t+"bg-gray-100 text-slate-500";case"created":return t+"bg-red-500 text-white";case"reported":return t+"bg-emerald-500 text-white";case"expired":return t+"bg-red-600 text-white animate-pulse";case"warning":return t+"bg-amber-500 text-white animate-pulse";case"no_plan_warning":return t+"bg-red-700 text-white animate-pulse";case"rejected_final":return t+"bg-rose-600 text-white";case"rejected_warning":return t+"bg-rose-600 text-white animate-pulse";case"closed":return t+"bg-slate-900 text-white";case"approved":return t+"bg-emerald-500 text-white shadow-emerald-200/50"}},D=e=>{if(!e)return"-";let t=e.replace(/_/g," ");return t=t.replace(/final/gi,"").trim(),t=t.replace(/warning/gi,"").trim(),t},T=e=>{let t=y.month,a=y.year;"prev"===e?1===t?(t=12,a--):t--:12===t?(t=1,a++):t++,w("change-month",{month:t,year:a})},B=t(null),L=t({x:0,y:0}),O=()=>{B.value=null},N=e=>{L.value={x:e.clientX+15,y:e.clientY+15}};return(e,t)=>(m(),a(o,null,[r("div",Z,[r("div",W,[r("div",Y,[r("div",q,[r("h3",J,[r("span",$,n(M[f.month-1]),1),r("span",G,n(f.year),1)]),r("div",X,[r("button",{onClick:t[0]||(t[0]=e=>T("prev")),class:"p-1.5 sm:p-2 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-xl transition-all active:scale-90"},[...t[3]||(t[3]=[r("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 focus:outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M15 19l-7-7 7-7"})],-1)])]),t[5]||(t[5]=r("div",{class:"w-px h-4 bg-slate-100 mx-0.5 sm:mx-1"},null,-1)),r("button",{onClick:t[1]||(t[1]=e=>T("next")),class:"p-1.5 sm:p-2 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-xl transition-all active:scale-90"},[...t[4]||(t[4]=[r("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 focus:outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M9 5l7 7-7 7"})],-1)])])])]),r("p",K,[t[6]||(t[6]=r("svg",{class:"w-3.5 h-3.5 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t[7]||(t[7]=r("span",{class:"whitespace-nowrap uppercase tracking-widest opacity-60"},"Today:",-1)),r("span",Q,n(S.value),1)])]),t[8]||(t[8]=l('<div class="flex flex-col items-start md:items-end gap-3 self-stretch md:self-auto" data-v-c973d918><div class="grid grid-cols-2 sm:flex sm:flex-wrap items-center gap-x-4 gap-y-2 text-[9px] md:text-[10px] font-black text-slate-400 bg-white/50 backdrop-blur-sm border border-slate-100 p-3 rounded-2xl shadow-sm w-full md:w-auto" data-v-c973d918><div class="flex items-center gap-2" data-v-c973d918><span class="w-2 h-2 rounded-full bg-red-500 shadow-sm shadow-red-200" data-v-c973d918></span><span data-v-c973d918>Created</span></div><div class="flex items-center gap-2" data-v-c973d918><span class="w-2 h-2 rounded-full bg-emerald-500 shadow-sm shadow-emerald-200" data-v-c973d918></span><span data-v-c973d918>Reported</span></div><div class="flex items-center gap-2" data-v-c973d918><span class="w-2 h-2 rounded-full bg-rose-600 shadow-sm shadow-rose-200" data-v-c973d918></span><span data-v-c973d918>Expired</span></div><div class="flex items-center gap-2" data-v-c973d918><span class="w-2 h-2 rounded-full bg-slate-900 shadow-sm shadow-slate-200" data-v-c973d918></span><span data-v-c973d918>Closed</span></div></div></div>',1))]),r("div",ee,[(m(),a(o,null,i(_,e=>r("div",{key:e,class:"py-3 text-center text-[10px] md:text-xs font-bold text-gray-500 uppercase tracking-widest"},n(e),1)),64))]),r("div",te,[(m(!0),a(o,null,i(k.value,(e,s)=>(m(),a("div",{key:s,class:d(["p-1.5 md:p-3 border-r border-b border-gray-50 group transition-colors hover:bg-emerald-50/10 relative",{"bg-gray-50/30 text-gray-400":!e.currentMonth,"border-r-0":(s+1)%7==0,"tablet:p-2 mobile:p-1":!0}])},[r("div",ae,[r("span",{class:d(["text-xs md:text-sm font-black w-7 h-7 md:w-8 md:h-8 flex items-center justify-center rounded-full transition-all shrink-0 aspect-square p-0 leading-none",C(e.date)?"bg-emerald-600 text-white shadow-md shadow-emerald-200/50 ring-2 ring-emerald-50":"text-slate-600 group-hover:text-emerald-700"])},n(e.day),3),r("button",{onClick:t=>(e=>{const t=e.toISOString().split("T")[0];w("create-plan",t)})(e.date),class:"opacity-0 group-hover:opacity-100 p-1.5 text-emerald-600 bg-emerald-50 md:bg-transparent hover:bg-emerald-100 rounded-xl transition-all transform hover:scale-110 mobile:opacity-100"},[...t[9]||(t[9]=[r("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M12 4v16m8-8H4"})],-1)])],8,re)]),r("div",se,[(m(!0),a(o,null,i(j(e.date),e=>(m(),a("div",{key:e.id,onClick:t=>{return a=e.customer,B.value=null,void w("open-detail",a);var a},onMouseenter:t=>((e,t)=>{B.value=e,N(t)})(e,t),onMousemove:t[2]||(t[2]=e=>N(e)),onMouseleave:O,class:"cursor-pointer group/item relative w-full"},[r("div",{class:d([A(f.getStatus({latest_plan:e,created_at:e.customer.created_at})),"!py-1 !px-2 rounded-xl border-b-[2px] border-black/10 active:scale-95 transition-all shadow-sm hover:translate-x-0.5"]),style:p(f.getBlinkStyle(e))},[r("div",ne,[t[10]||(t[10]=r("span",{class:"w-1 h-1 md:w-1.5 md:h-1.5 bg-white/40 rounded-full flex-shrink-0"},null,-1)),r("span",oe,n(e.customer.company_name),1)])],6)],40,le))),128))]),e.currentMonth&&0===j(e.date).length?(m(),a("div",ie,[...t[11]||(t[11]=[r("svg",{class:"w-10 h-10 md:w-12 md:h-12 text-emerald-600",fill:"currentColor",viewBox:"0 0 24 24"},[r("path",{d:"M12 4v16m8-8H4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])):c("",!0)],2))),128))])]),(m(),s(b,{to:"body"},[u(v,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:g(()=>[B.value?(m(),a("div",{key:0,style:p({top:L.value.y+"px",left:L.value.x+"px"}),class:"fixed z-[9999] pointer-events-none"},[r("div",de,[t[16]||(t[16]=r("div",{class:"absolute -top-20 -right-20 w-40 h-40 bg-emerald-500/20 blur-[60px] rounded-full pointer-events-none"},null,-1)),r("div",ce,[r("div",pe,[r("span",ue,n(B.value.activity_type),1),r("div",ge,[t[12]||(t[12]=r("svg",{class:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),x(" "+n(new Date(B.value.planning_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})),1)])]),r("div",me,[t[14]||(t[14]=r("p",{class:"text-[8px] text-emerald-500 font-black uppercase tracking-widest opacity-80"},"Customer",-1)),r("h4",xe,n(B.value.customer.company_name),1),r("div",ve,[t[13]||(t[13]=r("svg",{class:"w-2.5 h-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),x(" "+n(B.value.customer.product?.name||"No Product"),1)])]),B.value.description?(m(),a("div",be,[t[15]||(t[15]=r("span",{class:"text-emerald-500 font-black block text-[7px] uppercase tracking-widest mb-1 opacity-50"},"Description",-1)),x(' "'+n(B.value.description)+'" ',1)])):c("",!0),r("div",fe,[r("div",he,[r("div",ye,[r("div",{class:d(["absolute inset-0 rounded-full animate-ping opacity-75",A(f.getStatus({latest_plan:B.value,created_at:B.value.customer.created_at})).includes("emerald-500")?"bg-emerald-500":"bg-red-500"])},null,2),r("div",{class:d(["relative w-full h-full rounded-full",A(f.getStatus({latest_plan:B.value,created_at:B.value.customer.created_at})).includes("emerald-500")?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]":"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]"])},null,2)]),r("span",we,n(D(f.getStatus({latest_plan:B.value,created_at:B.value.customer.created_at}))),1)])])])])],4)):c("",!0)]),_:1})]))],64))}},ke=P(_e,[["__scopeId","data-v-c973d918"]]),je={class:"space-y-4 font-sans p-4 sm:p-6 max-w-[1920px] mx-auto"},Ce={class:"flex items-center gap-2 sm:gap-4 mb-2"},Me={class:"flow-root rounded-xl sm:rounded-2xl border border-gray-200 bg-white shadow-sm overflow-hidden"},Se={key:0,class:"border-b border-gray-200 bg-white px-4 sm:px-6"},Ae={class:"-mb-px flex space-x-6 sm:space-x-8 overflow-x-auto scrollbar-none","aria-label":"Tabs"},De=["onClick"],Te={class:"bg-white border-b border-gray-200"},Be={class:"px-4 sm:px-6 pt-4 pb-3"},Le={class:"relative"},Oe={class:"px-4 sm:px-6 pb-4"},Ne={class:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between"},Ie={class:"flex flex-wrap items-center gap-2"},Ve={class:"flex items-center gap-2"},Pe=["value"],Ee=["value"],ze={key:0,class:"hidden sm:block w-px h-8 bg-gray-200"},He={key:1,class:"flex items-center gap-2"},Re=["value"],Fe=["value"],Ue={class:"flex items-center gap-3"},Ze={class:"flex p-1 bg-gray-100 rounded-xl"},We={key:1},Ye={key:1,class:"inline-flex items-center gap-2 rounded-lg bg-gray-200 px-4 py-2 text-sm font-semibold text-gray-500 cursor-not-allowed",title:"Planning can only be created on Friday"},qe={class:"block sm:hidden space-y-4 pb-12"},Je=["onClick"],$e={class:"absolute -right-2 -top-4 text-[80px] font-black text-gray-50 pointer-events-none select-none z-0"},Ge={class:"relative z-10 p-5"},Xe={class:"flex justify-between items-start mb-6"},Ke={class:"pr-8 relative"},Qe={class:"text-lg font-bold text-gray-800 leading-tight tracking-tight"},et={class:"text-xs font-medium text-gray-400 mt-1 flex items-center gap-1"},tt={class:"shrink-0 text-[10px] uppercase font-bold bg-blue-50 text-blue-600 px-3 py-1 rounded-full ring-1 ring-blue-100/50 shadow-sm"},at={class:"flex justify-around items-start mb-6 bg-gray-50/50 rounded-xl p-3 border border-gray-100/50"},rt={class:"flex flex-col items-center flex-1"},st={class:"relative group flex flex-col items-center"},lt={key:0,class:"h-10 w-10 rounded-full bg-gray-200 border border-gray-300"},nt={class:"flex flex-col items-center flex-1"},ot={class:"relative group flex flex-col items-center"},it={key:0,class:"h-10 w-10 rounded-full bg-red-500 shadow-sm"},dt=["onClick"],ct={key:0,class:"text-[9px] text-gray-500 font-medium mt-1 text-center whitespace-nowrap"},pt={key:1,class:"text-[9px] text-gray-500 font-medium mt-1 text-center whitespace-nowrap"},ut={key:2,class:"h-10 w-10 rounded-full bg-gray-100 border border-gray-200"},gt={class:"flex flex-col items-center flex-1"},mt={class:"relative group flex flex-col items-center"},xt={key:0,class:"h-10 w-10 rounded-full bg-red-500 shadow-sm"},vt={key:0,class:"text-[9px] text-gray-400 font-medium mt-1 text-center whitespace-nowrap"},bt={key:1,class:"text-[9px] text-gray-500 font-medium mt-1 text-center whitespace-nowrap"},ft={key:2,class:"text-[9px] text-gray-500 font-medium mt-1 text-center whitespace-nowrap"},ht={key:2,class:"h-10 w-10 rounded-full bg-red-400 flex items-center justify-center text-[10px] font-bold text-white shadow-sm"},yt={class:"flex items-center justify-center gap-3"},wt=["onClick","disabled"],_t={key:0,class:"text-[10px] font-bold uppercase tracking-wide"},kt=["onClick","disabled"],jt={key:0,class:"text-[10px] font-bold uppercase tracking-wide"},Ct=["onClick","disabled"],Mt={key:0,class:"text-[10px] font-bold uppercase tracking-wide"},St={class:"flex items-center justify-center gap-6"},At=["onClick"],Dt={key:3,class:"w-full py-3.5 rounded-xl border border-gray-100 bg-gray-50/50 text-center text-xs font-bold text-gray-400 uppercase tracking-wide"},Tt={key:6,class:"w-full py-3.5 rounded-xl border border-gray-100 bg-gray-50/50 text-center text-xs font-bold text-gray-400 uppercase tracking-wide"},Bt={key:0,class:"flex flex-col items-center justify-center p-12 text-center"},Lt={class:"hidden sm:block relative"},Ot={class:"overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},Nt={class:"w-full min-w-full divide-y divide-gray-200"},It={class:"bg-gray-50/50"},Vt={class:"flex items-center gap-1"},Pt={key:0,class:"h-4 w-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Et={key:1,class:"h-4 w-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},zt={key:2,class:"h-4 w-4 text-gray-400 transition-opacity",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ht={key:0,rowspan:"2",class:"px-2 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-[200px]"},Rt={key:1,rowspan:"2",class:"px-2 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-[160px]"},Ft={key:2,rowspan:"2",class:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-36"},Ut={class:"divide-y divide-gray-100 bg-white"},Zt=["onClick"],Wt={class:"px-4 py-4 text-xs text-gray-500"},Yt={class:"px-4 py-4"},qt={class:"text-xs leading-4 font-medium text-gray-900"},Jt={class:"px-4 py-4"},$t={class:"text-xs leading-4 bg-blue-100 text-blue-700 px-2.5 py-1 rounded-md font-semibold border border-blue-200"},Gt={class:"px-4 py-4"},Xt={class:"text-xs text-gray-500"},Kt={class:"px-2 py-4 text-center align-middle"},Qt={class:"flex flex-col items-center justify-center gap-1"},ea={key:0,class:"h-10 w-10 rounded-full bg-gray-200 border border-gray-300"},ta={key:3,class:"text-[10px] text-emerald-600 block mt-1 font-medium"},aa={key:4,class:"text-[9px] font-bold text-gray-900"},ra={key:5,class:"text-[10px] text-red-500 block mt-1 font-medium"},sa={key:6,class:"text-[10px] text-red-500 block mt-1 font-medium"},la={key:7,class:"text-[10px] text-gray-500 block mt-1 font-medium"},na={class:"px-2 py-4 text-center align-middle"},oa={class:"flex flex-col items-center justify-center gap-1"},ia={key:0,class:"h-10 w-10 rounded-full bg-red-500 shadow-sm"},da=["onClick"],ca={key:0,class:"text-[10px] text-gray-500 font-medium"},pa={key:1,class:"text-[10px] text-gray-500 font-medium"},ua={key:2,class:"h-10 w-10 rounded-full bg-gray-100 border border-gray-200"},ga={class:"px-2 py-4 text-center align-middle"},ma={class:"flex flex-col items-center justify-center gap-1"},xa={key:0,class:"h-10 w-10 rounded-full bg-red-500 shadow-sm"},va={key:0,class:"text-[10px] text-gray-400 font-medium"},ba={key:1,class:"text-[10px] text-gray-500 font-medium"},fa={key:2,class:"text-[10px] text-gray-500 font-medium"},ha={key:2,class:"h-10 w-10 rounded-full bg-red-400 flex items-center justify-center text-[10px] font-bold text-white shadow-sm"},ya={key:0,class:"px-2 py-4 text-center align-middle"},wa={class:"flex items-center justify-center gap-2"},_a=["onClick"],ka=["onClick","disabled","title"],ja={key:0,class:"text-[10px] font-bold uppercase tracking-wide"},Ca=["onClick","disabled","title"],Ma={key:0,class:"text-[10px] font-bold uppercase tracking-wide"},Sa=["onClick","disabled","title"],Aa={key:0,class:"text-[10px] font-bold uppercase tracking-wide"},Da={class:"flex items-center justify-center w-full"},Ta=["onClick"],Ba=["onClick"],La=["onClick","disabled"],Oa=["onClick","disabled"],Na={key:1,class:"w-24 h-8 rounded-full bg-gray-50 border border-gray-100 flex items-center justify-center opacity-60 cursor-not-allowed"},Ia={class:"flex justify-center gap-2"},Va={key:1,class:"w-32 justify-center px-3 py-1.5 rounded-lg text-xs font-semibold bg-gray-100 text-gray-400 border border-gray-200 cursor-not-allowed whitespace-nowrap shadow-sm flex items-center gap-1"},Pa=["onClick"],Ea={key:0,class:"w-32 justify-center flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold bg-yellow-50 text-yellow-600 border border-yellow-200 cursor-not-allowed whitespace-nowrap shadow-sm opacity-90",title:"Cannot create new plan while previous plan is waiting for Manager/BOD review"},za=["title"],Ha={key:0,class:"border-t border-gray-200 px-4 py-3 sm:px-6 sm:py-4 flex flex-col sm:flex-row items-center justify-between gap-4"},Ra={class:"flex flex-col xs:flex-row items-center gap-3 w-full sm:w-auto justify-between sm:justify-start"},Fa={class:"text-xs text-gray-500 whitespace-nowrap"},Ua={class:"font-medium"},Za={class:"font-medium"},Wa={class:"font-medium"},Ya={class:"flex items-center border border-gray-300 rounded-md overflow-hidden shadow-sm"},qa={key:0,class:"flex flex-wrap justify-center gap-1 w-full sm:w-auto"},Ja={key:1,class:"p-4 sm:p-6 bg-gray-50/50"},$a={class:"fixed inset-0 overflow-y-auto"},Ga={class:"flex min-h-full items-center justify-center p-4 text-center"},Xa={class:"sticky top-0 z-10 bg-white/95 backdrop-blur-sm border-b border-gray-100 px-4 sm:px-6 py-4"},Ka={class:"flex items-start sm:items-center justify-between gap-3"},Qa={class:"text-emerald-600 block sm:inline mt-1 sm:mt-0 sm:ml-1 text-sm sm:text-xl"},er={class:"max-h-[65vh] sm:max-h-[70vh] overflow-y-auto px-4 sm:px-6 py-4 space-y-4 sm:space-y-6 scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent"},tr={class:"bg-gradient-to-r from-gray-50 to-white px-3 sm:px-4 py-3 border-b border-gray-100"},ar={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},rr={class:"flex items-center gap-2 sm:gap-3"},sr={class:"text-base sm:text-lg font-bold text-emerald-600 bg-emerald-50 px-2.5 sm:px-3 py-1 rounded-lg border border-emerald-100 shadow-sm"},lr={class:"flex flex-col"},nr={class:"text-[10px] sm:text-xs text-gray-500 font-medium uppercase tracking-wider"},or={class:"text-[10px] sm:text-xs text-gray-600 font-semibold"},ir={class:"flex items-center gap-2 flex-wrap"},dr={class:"flex items-center gap-1.5 bg-white/80 px-2 py-1 rounded-full border border-gray-100 shadow-sm"},cr=["src","alt"],pr={key:1,class:"h-5 w-5 sm:h-6 sm:w-6 rounded-full bg-emerald-100 flex items-center justify-center text-[9px] sm:text-[10px] font-bold text-emerald-600"},ur={class:"text-[10px] sm:text-xs text-gray-600 font-medium"},gr={class:"grid grid-cols-1 md:grid-cols-2"},mr={class:"p-3 sm:p-4 space-y-3 border-b md:border-b-0 md:border-r border-gray-100"},xr={class:"space-y-2.5"},vr={class:"grid grid-cols-2 gap-2 sm:gap-3"},br={class:"bg-gray-50 p-3 rounded-xl"},fr={class:"text-xs sm:text-sm font-semibold text-gray-900 mt-0.5"},hr={class:"bg-gray-50 p-3 rounded-xl"},yr=["title"],wr={class:"text-xs sm:text-sm text-gray-700 bg-gray-50 p-3 rounded-xl leading-relaxed"},_r={class:"p-3 sm:p-4 space-y-3 bg-gray-50/50"},kr={class:"text-[10px] sm:text-xs font-bold text-blue-600 uppercase tracking-wider flex items-center justify-between"},jr={key:0},Cr={key:0,class:"bg-yellow-100 text-yellow-700 border-yellow-200 text-[9px] sm:text-[10px] font-bold px-2 py-0.5 rounded-full border shadow-sm"},Mr={key:0,class:"space-y-2.5"},Sr={class:"grid grid-cols-2 gap-2 sm:gap-3"},Ar={class:"bg-white p-3 rounded-xl border border-gray-100/50 shadow-sm"},Dr={class:"text-xs sm:text-sm font-semibold text-gray-900 mt-0.5"},Tr={class:"bg-white p-3 rounded-xl border border-gray-100/50 shadow-sm"},Br=["title"],Lr={class:"grid grid-cols-2 gap-2 sm:gap-3"},Or={class:"bg-white p-3 rounded-xl border border-gray-100/50 shadow-sm"},Nr={class:"text-xs sm:text-sm text-gray-900 font-medium mt-0.5"},Ir={class:"bg-white p-3 rounded-xl border border-gray-100/50 shadow-sm"},Vr=["title"],Pr={class:"bg-white p-2.5 sm:p-3 rounded-xl border border-gray-100/50 shadow-sm"},Er={class:"flex items-center justify-between mb-1.5 sm:mb-2"},zr={class:"w-full bg-gray-100 rounded-full h-2.5 sm:h-3 overflow-hidden"},Hr={class:"text-xs sm:text-sm text-gray-700 bg-white p-3 rounded-xl border border-gray-100/50 shadow-sm leading-relaxed"},Rr={key:0},Fr={class:"text-xs sm:text-sm text-gray-600 bg-white p-2.5 sm:p-3 rounded-lg border-2 border-gray-100 border-dashed italic leading-relaxed"},Ur={key:1,class:"flex flex-col items-center justify-center text-gray-400 py-6 sm:py-8 bg-white/50 rounded-lg border border-dashed border-gray-200"},Zr={key:0,class:"p-3 sm:p-4 space-y-3 border-t md:border-t-0 md:border-t border-gray-100 bg-amber-50/20 md:col-span-2"},Wr={class:"space-y-3"},Yr={class:"flex items-center justify-between mb-1.5"},qr={class:"text-[10px] font-bold text-gray-700 uppercase"},Jr={class:"text-[9px] text-gray-400"},$r={class:"text-[10px] sm:text-xs text-gray-600 leading-relaxed italic"},Gr={class:"mt-1.5 flex items-center justify-between"},Xr={key:1,class:"text-center py-12 sm:py-16"},Kr={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4 sm:px-6"},Qr={class:"relative w-full max-w-lg transform overflow-hidden rounded-xl bg-white shadow-2xl transition-all"},es={class:"flex flex-col sm:flex-row"},ts={class:"flex-1 bg-white p-5 sm:p-6 sm:rounded-r-xl"},as={class:"mt-2.5"},rs={class:"text-sm text-gray-600 leading-relaxed"},ss={class:"mb-3"},ls={class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-red-100 text-red-800 font-bold text-base ring-1 ring-red-200"},ns={class:"animate-pulse"},os={class:"space-y-2 bg-gray-50 rounded-lg p-3 border border-gray-100"},is={key:0,class:"flex justify-between items-center text-xs"},ds={class:"font-bold text-gray-900 bg-white px-2 py-0.5 rounded shadow-sm border border-gray-200"},cs={key:1,class:"flex justify-between items-center text-xs"},ps={class:"font-bold text-gray-900 bg-white px-2 py-0.5 rounded shadow-sm border border-gray-200"},us={key:2,class:"flex justify-between items-center text-xs"},gs={class:"font-bold text-gray-900 bg-white px-2 py-0.5 rounded shadow-sm border border-gray-200"},ms={key:3,class:"flex justify-between items-center text-xs"},xs={class:"font-bold text-gray-900 bg-white px-2 py-0.5 rounded shadow-sm border border-gray-200"},vs={key:4,class:"flex justify-between items-center text-xs"},bs={class:"font-bold text-gray-900 bg-white px-2 py-0.5 rounded shadow-sm border border-gray-200"},fs={key:5,class:"flex justify-between items-center text-xs"},hs={class:"font-bold text-gray-900 bg-white px-2 py-0.5 rounded shadow-sm border border-gray-200"},ys={class:"flex flex-col sm:flex-row overflow-hidden"},ws={class:"relative z-10"},_s={class:"relative w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center shadow-lg ring-2 ring-white/30"},ks={key:0,class:"w-6 h-6 text-white drop-shadow-md",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},js={key:1,class:"w-6 h-6 text-white drop-shadow-md",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},Cs={key:2,class:"w-6 h-6 text-white drop-shadow-md",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},Ms={class:"flex-1 bg-white p-5 sm:p-6 sm:rounded-r-xl"},Ss={class:"text-lg font-bold text-gray-900 tracking-tight"},As={class:"mt-2.5 space-y-1.5"},Ds={class:"text-sm text-gray-600 leading-relaxed"},Ts={class:"group px-3 py-2.5 bg-gradient-to-r from-gray-50 via-gray-50 to-gray-100/50 rounded-lg border border-gray-200/60 hover:border-gray-300/60 transition-all"},Bs={class:"flex items-center gap-2"},Ls={class:"font-bold text-gray-900 text-sm truncate"},Os={key:0,class:"mt-2.5"},Ns={class:"mt-2.5"},Is={class:"mt-3.5 flex justify-end gap-2.5"},Vs={class:"flex flex-col sm:flex-row"},Ps={class:"flex-1 bg-white p-5 sm:rounded-r-lg"},Es={class:"mt-5 flex justify-end gap-3"},zs=["disabled"],Hs={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Rs={key:1,class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},Fs={key:0,class:"relative z-[60]","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Us={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Zs={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Ws={class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg border border-red-100"},Ys={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},qs=["disabled"],Js={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$s=["disabled"],Gs={class:"p-4 sm:p-6 overflow-y-auto max-h-[80vh] bg-white"},Xs={class:"bg-white p-4 sm:p-6 rounded-3xl border border-gray-100 shadow-sm relative overflow-hidden"},Ks={class:"space-y-5"},Qs={class:"grid grid-cols-1 sm:grid-cols-2 gap-5"},el=["min","max"],tl={key:0,class:"mt-1 text-xs font-bold text-red-500"},al=["value"],rl={key:0,class:"mt-1 text-xs font-bold text-red-500"},sl={key:0,class:"mt-1 text-xs font-bold text-red-500"},ll={class:"flex items-center gap-4 mb-6 px-2 py-3 bg-white rounded-2xl border border-dashed border-gray-200 justify-between"},nl={class:"space-y-8"},ol={class:"bg-white p-4 sm:p-6 rounded-3xl border border-gray-100 shadow-sm relative overflow-hidden"},il={class:"space-y-5"},dl={class:"grid grid-cols-1 sm:grid-cols-2 gap-5"},cl={key:0,class:"mt-1 text-xs font-bold text-red-500"},pl={key:0,class:"mt-1 text-xs font-bold text-red-500"},ul={class:"grid grid-cols-1 sm:grid-cols-2 gap-5"},gl={key:0,class:"mt-1 text-xs font-bold text-red-500"},ml={key:0,class:"mt-1 text-xs font-bold text-red-500"},xl={key:0,class:"mt-1 text-xs font-bold text-red-500"},vl={class:"grid grid-cols-1 sm:grid-cols-2 gap-5 items-start"},bl=["value"],fl={key:0,class:"mt-1 text-xs font-bold text-red-500"},hl={key:0,class:"absolute text-[9px] font-bold text-white left-1.5 top-1.5"},yl={key:1,class:"absolute text-[9px] font-bold text-white right-1.5 top-1.5"},wl={key:0,class:"mt-1 text-xs font-bold text-red-500"},_l={key:0,class:"bg-blue-50/30 p-4 sm:p-6 rounded-3xl border border-blue-100 shadow-sm relative overflow-hidden"},kl={class:"space-y-5"},jl={class:"grid grid-cols-1 sm:grid-cols-2 gap-5"},Cl=["value"],Ml={key:0,class:"mt-1 text-xs font-bold text-red-500"},Sl=["min","max"],Al={key:0,class:"mt-1 text-xs font-bold text-red-500"},Dl={key:0,class:"mt-1 text-xs font-bold text-red-500"},Tl={key:1,class:"bg-gradient-to-br from-gray-800 to-gray-900 p-4 sm:p-6 rounded-2xl border border-gray-700 shadow-lg"},Bl={class:"flex items-center justify-end pt-6 border-t border-gray-50 mt-8 gap-3"},Ll=["disabled"],Ol=Object.assign({layout:O},{__name:"Index",props:{customers:Object,user_roles:Array,timeSettings:Object,currentSimulatedTime:String,reminderData:Object,filters:Object,teams:Array,users:Array},setup(v){const b=f(),O=t(!1),P=t(null),Z=t(null),W=e=>{Z.value=e,P.value=e.latest_plan,O.value=!0},Y=()=>{O.value=!1,setTimeout(()=>{P.value=null,Z.value=null},200)},q=["Call","Visit","Ent","Online Meeting","Survey","Presentation","Proposal","Negotiation","Admin/Tender","Other"],J=["10%-Introduction","20%-Visit","30%-Presentation","40%-Survey","50%-Proposal","75%-Confirm Budget","90%-Tender&Nego","100%-Closing"],$=t(!1),G=t(null),X=h({planning_date:"",activity_type:"",description:"",has_report:!1,execution_date:"",result_description:"",location:"",pic:"",position:"",progress:"",is_success:!0,next_planning_date:"",next_plan_description:"",next_activity_type:""}),K=e=>{G.value=e,X.clearErrors(),X.planning_date=e.planning_date,X.activity_type=e.activity_type||"",X.description=e.description,e.report?(X.has_report=!0,X.execution_date=e.report.execution_date?e.report.execution_date.split("T")[0]:(new Date).toISOString().split("T")[0],X.result_description=e.report.result_description||"",X.location=e.report.location||"",X.pic=e.report.pic||"",X.position=e.report.position||"",X.progress=e.report.progress||"",X.is_success=void 0===e.report.is_success||Boolean(e.report.is_success),X.next_planning_date="",X.next_plan_description="",X.next_activity_type=""):(X.has_report=!1,X.execution_date=(new Date).toISOString().split("T")[0],X.result_description="",X.location="",X.pic="",X.position="",X.progress="",X.is_success=!0,X.next_planning_date="",X.next_plan_description="",X.next_activity_type=""),$.value=!0,Y()},Q=()=>{$.value=!1,X.reset(),G.value=null},ee=()=>{G.value&&X.patch(route("planning.revise",G.value.id),{onSuccess:()=>{Q()},preserveScroll:!0})},te=v,ae=({month:e,year:t})=>{ce.value=e,pe.value=t},re=t(te.filters?.search||""),se=t(te.filters?.team||""),le=t(te.filters?.user||""),ne=te.filters?.tab||"all",oe=t("all"===ne?"all":te.filters?.perPage||"10"),ie=t("table"),de=e=>{ie.value=e,"calendar"===e&&"all"!==hn.value?_n("all"):"table"===e&&"all"===hn.value&&w.get(route("planning.index"),{...te.filters,tab:void 0,perPage:10},{preserveState:!1,replace:!0})},ce=t(te.filters.month?parseInt(te.filters.month):(new Date).getMonth()+1),pe=t(te.filters.year?parseInt(te.filters.year):(new Date).getFullYear()),ue=[{value:1,label:"Jan"},{value:2,label:"Feb"},{value:3,label:"Mar"},{value:4,label:"Apr"},{value:5,label:"May"},{value:6,label:"Jun"},{value:7,label:"Jul"},{value:8,label:"Aug"},{value:9,label:"Sep"},{value:10,label:"Oct"},{value:11,label:"Nov"},{value:12,label:"Dec"}],ge=(new Date).getFullYear(),me=Array.from({length:5},(e,t)=>ge-2+t);y([ce,pe],()=>{ye()});const xe=e(()=>te.user_roles&&(te.user_roles.includes("BOD")||te.user_roles.includes("Board of Director"))),ve=e(()=>{if(te.user_roles&&(te.user_roles.includes("Super Admin")||te.user_roles.includes("SuperAdmin")))return!0;const e=te.user_roles||[];return!(e.includes("BOD")||e.includes("Board of Director"))}),be=t(te.filters?.sort||""),fe=t(te.filters?.direction||"asc"),he=e(()=>se.value?te.users.filter(e=>e.team_id==se.value):te.users),ye=N.debounce(()=>{w.get(route("planning.index"),{search:re.value,team:se.value,user:le.value,sort:be.value,direction:fe.value,sort:be.value,direction:fe.value,perPage:oe.value,month:ce.value,year:pe.value,tab:hn.value,page:1},{preserveState:!0,preserveScroll:!0,replace:!0,only:["customers","filters","timeSettings","reminderData"]})},300);y(re,()=>{ye()}),y(se,e=>{if(e&&le.value){he.value.some(e=>e.id==le.value)||(le.value="")}ye()}),y(le,()=>{ye()}),y(oe,()=>{ye()});const we=()=>te.currentSimulatedTime?new Date(te.currentSimulatedTime).getTime():(new Date).getTime(),_e=e=>{const t=e.latest_plan,a=te.timeSettings?.planning_time_unit||"Days (Production)",r=te.timeSettings?.planning_warning_threshold||14,s=e=>{if(!e)return 0;const t=new Date(e).getTime(),r=we()-t;return"Hours"===a?r/36e5:"Minutes"===a||"Minutes"===a?r/6e4:r/864e5};if(t&&t.report&&"100%-Closing"===t.report.progress&&"success"===t.bod_status)return"closed";if(t&&"ESCALATION"===t.activity_type){return s(e.created_at)>=r?"no_plan_warning":"none"}if(t&&"approved"===t.manager_status&&"failed"!==t.bod_status&&"success"!==t.bod_status)return"approved";if(!t){return s(e.created_at)>=r?"no_plan_warning":"none"}if("reported"===t.status&&"failed"===t.bod_status&&"approved"!==t.manager_status){return s(t.updated_at||t.created_at)>=r?"rejected_warning":"rejected_final"}if("created"===t.status){const e=te.timeSettings?.plan_expiry_unit||"Days (Production)",s=te.timeSettings?.plan_expiry_value||7,l=(e,t)=>{if(!t)return 864e5*e;const a=t.trim().toLowerCase();return a.includes("hour")?36e5*e:a.includes("minute")?6e4*e:864e5*e},n=we(),o=l(s,e),i=l(r,a),d=t.planning_date?t.planning_date.split("T")[0]:null,c=new Date(n).toISOString().split("T")[0];if(d&&d>c)return"rejected"===t.lifecycle_status||"failed"===t.bod_status||"rejected"===t.manager_status?"rejected_final":"created";const p=n-(d?new Date(d+"T23:59:59").getTime():new Date(t.created_at).getTime());return p<0?"rejected"===t.lifecycle_status||"failed"===t.bod_status||"rejected"===t.manager_status?"rejected_final":"created":"rejected"===t.lifecycle_status||"failed"===t.bod_status||"rejected"===t.manager_status?p>=i?"rejected_warning":"rejected_final":p>=o?p>=i?"expired_warning":"expired":p>=i?"warning":"created"}const l=s(t.updated_at||t.planning_date);if("failed"===t.lifecycle_status||"failed"===t.bod_status||"rejected"===t.manager_status)return l>=r?"rejected_warning":"rejected_final";if("success"===t.bod_status||"success"===t.lifecycle_status||t.status_log&&t.status_log.length>0&&"history"===t.status_log[t.status_log.length-1].status.toLowerCase())return"reported";return"reported"===t.status&&("pending"===t.manager_status||"approved"===t.manager_status&&"pending"===t.bod_status||"escalated"===t.manager_status)?"reported":l>=r?"warning":"success"===t.bod_status?t.report&&"100%-Closing"===t.report.progress?"closed":"approved":"approved"===t.manager_status?"approved":"reported"},Ol=e=>{if(!e)return{};const t=we();if("object"==typeof e&&e.planning_date){if(e.planning_date.split("T")[0]>new Date(t).toISOString().split("T")[0])return{}}let a;if("object"==typeof e&&(e.planning_date||e.created_at)){const t=e.planning_date?e.planning_date.split("T")[0]:null;a=t?t+"T23:59:59":e.created_at}else a=e;if(!a)return{};const r=t-new Date(a).getTime();if(r<0)return{};const s=te.timeSettings?.planning_time_unit||"Days (Production)",l=((e,t)=>{const a=t.trim().toLowerCase();return a.includes("hour")?36e5*e:a.includes("minute")?6e4*e:864e5*e})(te.timeSettings?.planning_warning_threshold||14,s);if(l<=0)return{animationDuration:"2s"};const n=r/l;let o="2s";return n>=10?o="0.15s":n>=5?o="0.3s":n>=2.5?o="0.6s":n>=1&&(o="1s"),{animationDuration:o}},Nl=e=>{const t=e.latest_plan,a=_e(e);return t?"failed"===t.bod_status?"rejected":t.manager_status&&"pending"!==t.manager_status?t.manager_status:"none"===a||"no_plan_warning"===a||"expired"===a||"expired_warning"===a||"warning"===a?"rejected":"reported"===a||"approved"===a?"need_review":"pending":"rejected"},Il=e=>{const t=e.latest_plan,a=_e(e);if(!t||"none"===a||"no_plan_warning"===a||"expired"===a||"expired_warning"===a||"warning"===a||"created"===a)return"failed";if("failed"===t.bod_status)return"failed";if("rejected"===t.manager_status||"failed"===t.lifecycle_status)return"failed";const r=Nl(e);return"need_review"===r||"pending"===r&&["reported","approved"].includes(a)?"wait_manager":"success"===t.bod_status?"success":"pending"},Vl=e=>{const t=e.latest_plan;if(!t||"reported"!==t.status)return!(!t||"failed"!==t.lifecycle_status||"created"!==t.status)&&("approved"===t.manager_status||"rejected"===t.manager_status);return!("approved"!==t.manager_status&&"rejected"!==t.manager_status)},Pl=t(!1),El=t(""),zl=t(""),Hl=t(null),Rl=t(""),Fl=t(!1),Ul=t(""),Zl=t({remaining:3,max:3,grace_seconds:0,is_super_admin:!1,can_change:!0}),Wl=t(!1),Yl=t(""),ql=t("error"),Jl=t(!1),$l=t(!1),Gl=()=>{Jl.value=!0},Xl=()=>{$l.value=!0,w.delete(route("planning.reset-all-status-logs"),{onSuccess:()=>{Jl.value=!1,$l.value=!1},onError:()=>{$l.value=!1}})},Kl={rejected:{text:"Reject",color:"text-red-600",bg:"bg-red-100",border:"border-red-200"},escalated:{text:"Escalate",color:"text-amber-600",bg:"bg-amber-100",border:"border-amber-200"},approved:{text:"Approve",color:"text-emerald-600",bg:"bg-emerald-100",border:"border-emerald-200"},success:{text:"Next",color:"text-emerald-600",bg:"bg-emerald-100",border:"border-emerald-200"},failed:{text:"Failed",color:"text-red-600",bg:"bg-red-100",border:"border-red-200"},pending:{text:"Pending",color:"text-gray-600",bg:"bg-gray-100",border:"border-gray-200"}},Ql=async(e,t)=>{try{const a=await L.get(route("planning.status-info",e));return"control"===t?a.data.manager:a.data.bod}catch(a){return console.error("Failed to fetch quota info:",a),{remaining:0,max:3,grace_seconds:0,is_super_admin:!1,can_change:!1}}},en=async(e,t,a)=>{El.value="control",zl.value=t,Hl.value=e,Rl.value=a,Ul.value="",Fl.value=!0,Zl.value=await Ql(e,"control"),Fl.value=!1,Pl.value=!0},tn=async(e,t,a)=>{if(El.value="monitoring",zl.value=t,Hl.value=e,Rl.value=a,Ul.value="",Fl.value=!0,Zl.value=await Ql(e,"monitoring"),Fl.value=!1,!Zl.value.can_change)return Yl.value="You have reached the maximum status changes limit (3x). Contact Super Admin if needed.",ql.value="error",void(Wl.value=!0);Pl.value=!0},an=()=>{const e=te.customers?.data?.find(e=>e.latest_plan&&e.latest_plan.id===Hl.value);e&&e.latest_plan&&("control"===El.value?(e.latest_plan.manager_status=zl.value,e.latest_plan.manager_reviewed_at=te.currentSimulatedTime?new Date(te.currentSimulatedTime).toISOString():(new Date).toISOString(),"rejected"===zl.value?(e.latest_plan.bod_status="failed",e.latest_plan.lifecycle_status="failed"):["approved","escalated","pending"].includes(zl.value)&&"failed"===e.latest_plan.bod_status&&(e.latest_plan.bod_status="pending","failed"===e.latest_plan.lifecycle_status&&(e.latest_plan.lifecycle_status="active"))):(e.latest_plan.bod_status=zl.value,e.latest_plan.bod_reviewed_at=te.currentSimulatedTime?new Date(te.currentSimulatedTime).toISOString():(new Date).toISOString())),"control"===El.value?w.patch(route("planning.update-control",Hl.value),{manager_status:zl.value,notes:Ul.value},{preserveScroll:!0,only:["customers"],onSuccess:()=>{Pl.value=!1,Ul.value=""}}):w.patch(route("planning.update-monitoring",Hl.value),{bod_status:zl.value,notes:Ul.value},{preserveScroll:!0,only:["customers"],onSuccess:()=>{Pl.value=!1,Ul.value=""}})},rn=()=>{Pl.value=!1,Hl.value=null,zl.value="",El.value=""},sn=e(()=>{if(te.timeSettings?.testing_mode)return!0;const e=(new Date).getDay();let t=te.timeSettings?.allowed_plan_creation_days||["Friday"];if("string"==typeof t)try{t=JSON.parse(t)}catch(r){t=["Friday"]}Array.isArray(t)||(t=["Friday"]);const a={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};return t.map(e=>isNaN(parseInt(e))?a[e]??-1:parseInt(e)).includes(e)}),ln=()=>{let e=te.timeSettings?.allowed_plan_creation_days||["Friday"];if("string"==typeof e)try{e=JSON.parse(e)}catch(a){e=["Friday"]}if(!Array.isArray(e))return"Friday";if(0===e.length)return"None";if(7===e.length)return"Any Day";const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map(e=>isNaN(parseInt(e))?e:t[parseInt(e)]).join(", ")},nn=e=>!!e&&(te.user_roles&&te.user_roles.includes("Super Admin"),!1),on=(e,t,a=null)=>{if(!e)return"escalated"===t;if(te.user_roles&&te.user_roles.includes("Super Admin"))return!0;if(a){const r=_e(a);if(["approved","rejected"].includes(e.manager_status)&&"escalated"===t)return!1;return["reported","approved"].includes(r)?"approved"===t||"rejected"===t:"escalated"===t}return!e.bod_status||"pending"===e.bod_status||("failed"===e.bod_status||("success"!==e.bod_status||("approved"===t||"escalated"===t)))},dn=(e,t)=>{if(!e)return!0;const a=e.manager_status||"pending";return"pending"===a||"escalated"===a||a===t},cn=e=>!e,pn=(e,t)=>{if(!e)return null;{if(nn(e))return null;if("pending"===e.manager_status)return null;if(!e.manager_reviewed_at)return null;const t=new Date(e.manager_reviewed_at),a=new Date(t);a.setDate(t.getDate()+7);const r=a-new Date;if(r<=0)return null;return`${Math.floor(r/864e5)}d ${Math.floor(r%864e5/36e5)}h left`}},un=e=>{let t=null;if(e.product)t=e.product.id;else{if(!(e.products&&e.products.length>0))return Yl.value="Cannot Escalate: Customer has no product assigned.",ql.value="error",void(Wl.value=!0);t=e.products[0].id}w.post(route("planning.store"),{customer_id:e.id,product_id:t,planning_date:(new Date).toISOString().split("T")[0],activity_type:"ESCALATION",description:"Manager Escalation Reminder",manager_status:"escalated"},{preserveScroll:!0,onError:e=>{Yl.value=`Failed to escalate: ${Object.values(e).join(", ")}`,ql.value="error",Wl.value=!0}})},gn=t(!1),mn=t(null),xn=t(!1),vn=()=>{mn.value&&(xn.value=!0,w.patch(route("planning.fail",mn.value),{},{preserveScroll:!0,onSuccess:()=>{gn.value=!1,mn.value=null,xn.value=!1},onError:()=>{xn.value=!1}}))},bn=t(!1),fn=t({type:"",count:0}),hn=t(te.filters.tab||"all"),yn=[{id:"all",name:"All Planning"},{id:"week1",name:"Week 1"},{id:"week2",name:"Week 2"},{id:"week3",name:"Week 3"},{id:"week4",name:"Week 4"},{id:"week5",name:"Week 5"}],wn=t(!1),_n=e=>{if(hn.value===e||wn.value)return void console.log("[changeTab] Blocked: Already on tab or switching. Target:",e);wn.value=!0,setTimeout(()=>{wn.value=!1},500),ye.cancel(),console.log("[changeTab] Switching to:",e,"Current tab:",hn.value),hn.value=e;const t="all"===e?"all":oe.value;oe.value=t;const{tab:a,...r}=te.filters||{};console.log("[changeTab] perPage:",t,"New tab:",e,"Old tab was:",a),w.get(route("planning.index"),{...r,tab:e,perPage:t,page:1},{preserveState:!1,preserveScroll:!1,replace:!0})};e(()=>te.customers?.data?te.customers.data.filter(e=>"pending"===Il(e)).length:0),e(()=>te.customers?.data?te.customers.data.filter(e=>{const t=_e(e),a=e.latest_plan;return!("reported"!==t&&"warning"!==t||a?.manager_status&&"pending"!==a.manager_status)}).length:0),e(()=>te.customers?.data?te.customers.data.filter(e=>"expired"===_e(e)).length:0);const kn=t(null);_(()=>{kn.value&&clearInterval(kn.value)}),k(()=>{"calendar"===ie.value&&"all"!==hn.value&&_n("all"),kn.value=setInterval(()=>{O.value||Pl.value||Jl.value||bn.value||wn.value||w.reload({only:["customers","reminderData"],preserveScroll:!0,preserveState:!0})},5e3),setTimeout(()=>{if(window.planningPopupDismissed)return;if(O.value||Pl.value)return;const e=te.reminderData?.plansNeedingReport||0,t=te.reminderData?.missing_plans_count||0,a=te.reminderData?.plansRejected||0,r=te.reminderData?.plansLateFollowUp||0,s=Sn.value&&te.reminderData?.bod_review_count||0,l=Mn.value&&te.reminderData?.manager_approval_count||0,n=e+t+a+r+s+l;n>0&&(fn.value={type:"summary",count:n,data:{expired:e,missing:t,rejected:a,late:r,reviews:s,approvals:l}},bn.value=!0)},1500)});const jn=()=>{window.planningPopupDismissed=!0,bn.value=!1},Cn=e(()=>te.user_roles&&te.user_roles.includes("Super Admin")),Mn=e(()=>Cn.value||te.user_roles&&te.user_roles.includes("Manager")),Sn=e(()=>Cn.value||te.user_roles&&(te.user_roles.includes("BOD")||te.user_roles.includes("Board of Director"))),An=e=>{if(Cn.value)return!0;if(te.user_roles&&(te.user_roles.includes("BOD")||te.user_roles.includes("Board of Director")))return!1;return b.props.auth.user.id===(e.marketing_sales_id||e.marketing?.id)},Dn=e(()=>!!Cn.value||te.user_roles&&(te.user_roles.includes("Manager")||te.user_roles.includes("BOD")||te.user_roles.includes("Board of Director"))),Tn=e(()=>!(xe.value&&!Cn.value)),Bn=(new Date).toISOString().split("T")[0],Ln=e(()=>{const e=new Date;return e.setDate(e.getDate()+14),e.toISOString().split("T")[0]}),On=e(()=>G.value&&G.value.planning_date?G.value.planning_date.split("T")[0]:Bn);e(()=>Bn);const Nn=e(()=>X.execution_date||Bn),In=e(()=>{const e=X.execution_date?new Date(X.execution_date):new Date;return e.setDate(e.getDate()+14),e.toISOString().split("T")[0]}),Vn=e(()=>"100%-Closing"===X.progress),Pn=e=>{if(!e)return"";const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getFullYear()).slice(-2)}`};return(e,t)=>(m(),a(o,null,[u(j(C),{title:"Planning"}),r("div",je,[r("div",Ce,[Cn.value?c("",!0):(m(),s(j(M),{key:0,href:e.route("dashboard"),class:"hidden lg:inline-flex group items-center gap-2 px-4 py-2 rounded-xl bg-white border border-gray-200 shadow-sm hover:shadow hover:border-gray-300 text-gray-600 hover:text-gray-900 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 active:scale-[0.98]"},{default:g(()=>[...t[35]||(t[35]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-4 h-4 group-hover:-translate-x-0.5 transition-transform duration-200"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})],-1),r("span",{class:"text-xs sm:text-sm font-bold"},"Back",-1)])]),_:1},8,["href"])),t[36]||(t[36]=r("h2",{class:"text-[24px] leading-[32px] font-bold text-gray-900"},"Planning",-1))]),r("div",Me,["table"===ie.value?(m(),a("div",Se,[r("nav",Ae,[(m(),a(o,null,i(yn,e=>r("button",{key:e.id,onClick:t=>_n(e.id),class:d([hn.value===e.id?"border-emerald-500 text-emerald-600 font-bold bg-emerald-50/30":"border-transparent text-gray-500 sm:hover:border-gray-300 sm:hover:text-gray-700 font-medium","whitespace-nowrap border-b-2 py-4 px-3 text-sm transition-all duration-200 flex items-center gap-2 rounded-t-lg"])},["all"===e.id?(m(),a("svg",{key:0,class:d(["h-4 w-4","all"===hn.value?"text-emerald-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...t[37]||(t[37]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},null,-1)])],2)):(m(),a("svg",{key:1,class:d(["h-4 w-4",hn.value===e.id?"text-emerald-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...t[38]||(t[38]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),x(" "+n(e.name),1)],10,De)),64))])])):c("",!0),r("div",Te,[r("div",Be,[r("div",Le,[t[39]||(t[39]=r("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4"},[r("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])],-1)),S(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>re.value=e),type:"text",placeholder:"Search customers, products...",class:"block w-full rounded-lg border-gray-300 py-2.5 pl-11 pr-3 text-sm text-gray-900 shadow-sm placeholder:text-gray-400 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all"},null,512),[[A,re.value]])])]),r("div",Oe,[r("div",Ne,[r("div",Ie,[r("div",Ve,[t[40]||(t[40]=r("span",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider hidden sm:inline"},"Period:",-1)),S(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>ce.value=e),class:"block rounded-lg border-gray-300 py-2 pl-3 pr-9 text-sm text-gray-900 shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 bg-white transition-all"},[(m(),a(o,null,i(ue,e=>r("option",{key:e.value,value:e.value},n(e.label),9,Pe)),64))],512),[[D,ce.value]]),S(r("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>pe.value=e),class:"block rounded-lg border-gray-300 py-2 pl-3 pr-9 text-sm text-gray-900 shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 bg-white transition-all"},[(m(!0),a(o,null,i(j(me),e=>(m(),a("option",{key:e,value:e},n(e),9,Ee))),128))],512),[[D,pe.value]])]),Dn.value?(m(),a("div",ze)):c("",!0),Dn.value?(m(),a("div",He,[Cn.value||v.user_roles&&v.user_roles.includes("BOD")?S((m(),a("select",{key:0,"onUpdate:modelValue":t[3]||(t[3]=e=>se.value=e),class:"block rounded-lg border-gray-300 py-2 pl-3 pr-9 text-sm text-gray-900 shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 bg-white transition-all"},[t[41]||(t[41]=r("option",{value:""},"All Teams",-1)),(m(!0),a(o,null,i(v.teams,e=>(m(),a("option",{key:e.id,value:e.id},n(e.name),9,Re))),128))],512)),[[D,se.value]]):c("",!0),S(r("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>le.value=e),class:"block rounded-lg border-gray-300 py-2 pl-3 pr-9 text-sm text-gray-900 shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 bg-white transition-all"},[t[42]||(t[42]=r("option",{value:""},"All Users",-1)),(m(!0),a(o,null,i(he.value,e=>(m(),a("option",{key:e.id,value:e.id},n(e.name),9,Fe))),128))],512),[[D,le.value]])])):c("",!0)]),r("div",Ue,[r("div",Ze,[r("button",{onClick:t[5]||(t[5]=e=>de("table")),class:d(["table"===ie.value?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-700","flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold rounded-lg transition-all"])},[...t[43]||(t[43]=[r("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1),r("span",{class:"hidden md:inline"},"Table",-1)])],2),r("button",{onClick:t[6]||(t[6]=e=>de("calendar")),class:d(["calendar"===ie.value?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-700","flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold rounded-lg transition-all"])},[...t[44]||(t[44]=[r("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),r("span",{class:"hidden md:inline"},"Calendar",-1)])],2)]),t[48]||(t[48]=r("div",{class:"w-px h-6 bg-gray-200 hidden sm:block"},null,-1)),Cn.value?(m(),a("button",{key:0,onClick:Gl,class:"inline-flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all shadow-sm"},[...t[45]||(t[45]=[r("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),r("span",{class:"hidden sm:inline"},"Reset Limits",-1)])])):c("",!0),ve.value?(m(),a("div",We,[sn.value?(m(),s(j(M),{key:0,href:e.route("planning.create"),class:"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-700 hover:shadow-md active:scale-[0.98] transition-all"},{default:g(()=>[...t[46]||(t[46]=[r("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1),x(" Create Plan ",-1)])]),_:1},8,["href"])):(m(),a("div",Ye,[...t[47]||(t[47]=[r("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[x("\\ "),r("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"})],-1),r("span",{class:"relative truncate"},"Friday Only",-1)])]))])):c("",!0)])])])]),S(r("div",null,[r("div",qe,[(m(!0),a(o,null,i(v.customers.data,(l,i)=>(m(),a("div",{key:l.id,onClick:e=>W(l),class:"bg-white rounded-2xl shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] ring-1 ring-gray-100 overflow-hidden relative transition-transform active:scale-[0.99] duration-200"},[r("div",$e,n((v.customers.from||1)+i),1),r("div",Ge,[r("div",Xe,[r("div",Ke,[r("h3",Qe,n(l.company_name),1),r("p",et,[t[49]||(t[49]=r("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),x(" "+n(l.marketing?.name||"Unassigned"),1)])]),r("span",tt,n(l.product?.name||"GEN"),1)]),r("div",at,[r("div",rt,[t[50]||(t[50]=r("span",{class:"text-[9px] font-extrabold text-gray-400 uppercase tracking-widest mb-2"},"Plan",-1)),r("div",st,["none"===_e(l)?(m(),a("div",lt)):"no_plan_warning"===_e(l)?(m(),a("div",{key:1,style:p(Ol(l.created_at)),class:"h-10 w-10 rounded-full bg-red-600 animate-glow-red shadow-md border-2 border-red-400"},null,4)):l.latest_plan?(m(),a("div",{key:2,class:d(["h-10 w-10 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm transition-all duration-300",{"bg-red-500":"created"===_e(l)||"rejected_final"===_e(l)||"expired"===_e(l),"bg-emerald-500":"reported"===_e(l)||"approved"===_e(l),"bg-gray-800":"closed"===_e(l),"animate-glow-red bg-red-600":"warning"===_e(l)||"no_plan_warning"===_e(l)||"expired_warning"===_e(l)||"rejected_warning"===_e(l)}]),style:p(Ol(l.latest_plan))},n("ESCALATION"===l.latest_plan.activity_type?"":l.latest_plan.activity_code),7)):c("",!0),l.latest_plan&&"ESCALATION"!==l.latest_plan.activity_type?(m(),a("span",{key:3,class:d(["text-[9px] font-medium mt-1 text-center whitespace-nowrap",{"text-red-600 font-bold":["rejected_final","rejected_warning","expired","expired_warning"].includes(_e(l)),"text-emerald-600 font-bold":"approved"===_e(l),"text-gray-800 font-bold":"closed"===_e(l),"text-gray-500":["created","reported","warning"].includes(_e(l))}])},n("closed"===_e(l)?"Closing":"approved"===_e(l)?"Approved":["rejected_final","rejected_warning"].includes(_e(l))?"Rejected":["expired","expired_warning"].includes(_e(l))?"Expired":Pn(l.latest_plan.planning_date)),3)):c("",!0)])]),r("div",nt,[t[51]||(t[51]=r("span",{class:"text-[9px] font-extrabold text-gray-400 uppercase tracking-widest mb-2"},"Ctrl",-1)),r("div",ot,["none"!==_e(l)&&"no_plan_warning"!==_e(l)||"ESCALATION"===l.latest_plan?.activity_type?l.latest_plan?(m(),a(o,{key:1},[r("div",{onClick:e=>An(l)&&"rejected"===Nl(l)?K(l.latest_plan):null,class:d(["h-10 w-10 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm transition-all duration-300",{"cursor-pointer hover:ring-2 hover:ring-offset-1 hover:ring-red-500":An(l)&&"rejected"===Nl(l),"animate-glow-red bg-red-600 border-2 border-red-400":"escalated"===Nl(l),"bg-red-500":"rejected"===Nl(l)||"pending"===Nl(l)&&!["reported","approved","closed"].includes(_e(l)),"bg-yellow-500":"need_review"===Nl(l)||"pending"===Nl(l)&&["reported","approved"].includes(_e(l)),"bg-emerald-500":"approved"===Nl(l)&&"closed"!==_e(l),"bg-gray-800":"closed"===_e(l)}])},n("ESCALATION"===l.latest_plan.activity_type?"":l.latest_plan.activity_code),11,dt),("need_review"===Nl(l)||"pending"===Nl(l)&&"reported"===_e(l))&&"ESCALATION"!==l.latest_plan.activity_type?(m(),a("span",ct," Need Review ")):l.latest_plan.manager_status&&"pending"!==l.latest_plan.manager_status&&"need_review"!==Nl(l)?(m(),a("span",pt,n(Pn(l.latest_plan.manager_reviewed_at||l.latest_plan.updated_at)),1)):c("",!0)],64)):(m(),a("div",ut)):(m(),a("div",it))])]),r("div",gt,[t[52]||(t[52]=r("span",{class:"text-[9px] font-extrabold text-gray-400 uppercase tracking-widest mb-2"},"Mon",-1)),r("div",mt,["none"===_e(l)||"no_plan_warning"===_e(l)?(m(),a("div",xt)):l.latest_plan?(m(),a(o,{key:1},[r("div",{class:d(["h-10 w-10 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm transition-all duration-300",{"bg-red-500":("failed"===Il(l)||"ESCALATION"===l.latest_plan?.activity_type)&&"closed"!==_e(l),"bg-emerald-500":"success"===Il(l)&&"closed"!==_e(l),"bg-yellow-500":("pending"===Il(l)||"wait_manager"===Il(l))&&"ESCALATION"!==l.latest_plan?.activity_type&&"closed"!==_e(l),"bg-gray-800":"closed"===_e(l)}])},n("ESCALATION"===l.latest_plan.activity_type?"":l.latest_plan.activity_code),3),"wait_manager"===Il(l)?(m(),a("span",vt," Wait Manager ")):"pending"===Il(l)&&"ESCALATION"!==l.latest_plan.activity_type?(m(),a("span",bt," Need Review ")):l.latest_plan.bod_status&&"pending"!==l.latest_plan.bod_status&&l.latest_plan.bod_reviewed_at&&"expired"!==_e(l)&&"expired_warning"!==_e(l)?(m(),a("span",ft,n(Pn(l.latest_plan.bod_reviewed_at)),1)):c("",!0)],64)):(m(),a("div",ht,"F"))])])]),Mn.value?(m(),a("div",{key:0,onClick:t[7]||(t[7]=B(()=>{},["stop"])),class:"mb-4 bg-gray-50/80 rounded-xl p-3 border border-gray-100"},[t[56]||(t[56]=r("h4",{class:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-3 text-center"},"Manager Actions",-1)),r("div",yt,[dn(l.latest_plan,"rejected")?(m(),a("button",{key:0,onClick:B(e=>en(l.latest_plan?.id,"rejected"===l.latest_plan?.manager_status?"pending":"rejected",l.company_name),["stop"]),disabled:!l.latest_plan||["none","no_plan_warning","created"].includes(_e(l))||"ESCALATION"===l.latest_plan.activity_type||nn(l.latest_plan)||!on(l.latest_plan,"rejected",l),class:d(["flex items-center justify-center rounded-full transition-all duration-200 border",["rejected"===l.latest_plan?.manager_status&&"warning"!==_e(l)?"bg-red-500 text-white border-red-600 shadow-sm px-4 py-1.5 h-8 gap-1.5":"w-8 h-8 border-red-200 text-red-300 bg-white hover:bg-red-500 hover:text-white hover:border-red-500 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-red-300"]])},[t[53]||(t[53]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-4 h-4"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)),"rejected"===l.latest_plan?.manager_status&&"warning"!==_e(l)?(m(),a("span",_t,"Reject")):c("",!0)],10,wt)):c("",!0),dn(l.latest_plan,"escalated")?(m(),a("button",{key:1,onClick:B(e=>l.latest_plan?en(l.latest_plan.id,"escalated"===l.latest_plan.manager_status?"pending":"escalated",l.company_name):un(l),["stop"]),disabled:nn(l.latest_plan)||l.latest_plan&&!on(l.latest_plan,"escalated",l),class:d(["flex items-center justify-center rounded-full transition-all duration-200 border",["escalated"===l.latest_plan?.manager_status?"bg-amber-500 text-white border-amber-600 shadow-sm px-4 py-1.5 h-8 gap-1.5":"w-8 h-8 border-amber-200 text-amber-300 bg-white hover:bg-amber-500 hover:text-white hover:border-amber-500 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-amber-300"]])},[t[54]||(t[54]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-4 h-4"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})],-1)),"escalated"===l.latest_plan?.manager_status?(m(),a("span",jt,"Escalate")):c("",!0)],10,kt)):c("",!0),dn(l.latest_plan,"approved")?(m(),a("button",{key:2,onClick:B(e=>en(l.latest_plan?.id,"approved"===l.latest_plan?.manager_status?"pending":"approved",l.company_name),["stop"]),disabled:!l.latest_plan||["none","no_plan_warning","created"].includes(_e(l))||"ESCALATION"===l.latest_plan.activity_type||nn(l.latest_plan)||!on(l.latest_plan,"approved",l),class:d(["flex items-center justify-center rounded-full transition-all duration-200 border",["approved"===l.latest_plan?.manager_status&&"warning"!==_e(l)?"bg-emerald-500 text-white border-emerald-600 shadow-sm px-4 py-1.5 h-8 gap-1.5":"w-8 h-8 border-emerald-200 text-emerald-300 bg-white hover:bg-emerald-500 hover:text-white hover:border-emerald-500 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-emerald-300"]])},[t[55]||(t[55]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-4 h-4"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1)),"approved"===l.latest_plan?.manager_status&&"warning"!==_e(l)?(m(),a("span",Mt,"Approve")):c("",!0)],10,Ct)):c("",!0)])])):c("",!0),Sn.value?(m(),a("div",{key:1,onClick:t[8]||(t[8]=B(()=>{},["stop"])),class:"mb-4 bg-gray-50/80 rounded-xl p-3 border border-gray-100"},[t[61]||(t[61]=r("h4",{class:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-3 text-center"},"BOD Actions",-1)),r("div",St,[r("div",{class:d(["flex flex-col items-center gap-1.5",{"opacity-50":!Vl(l),"!opacity-100":Vl(l)}])},[t[58]||(t[58]=r("span",{class:"text-[9px] font-bold text-emerald-500"},"SUCCESS",-1)),u(j(U),{"model-value":"success"===Il(l),"onUpdate:modelValue":e=>tn(l.latest_plan?.id,e?"success":"pending",l.company_name),disabled:!Vl(l),class:d(["success"===Il(l)?"bg-emerald-500":"bg-gray-200","relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500/20 cursor-pointer disabled:cursor-not-allowed"])},{default:g(()=>[t[57]||(t[57]=r("span",{class:"sr-only"},"Success",-1)),r("span",{class:d(["success"===Il(l)?"translate-x-5":"translate-x-1","inline-block h-3 w-3 transform rounded-full bg-white transition-transform"])},null,2)]),_:2},1032,["model-value","onUpdate:modelValue","disabled","class"])],2),r("div",{class:d(["flex flex-col items-center gap-1.5",{"opacity-50":!Vl(l),"!opacity-100":Vl(l)}])},[t[60]||(t[60]=r("span",{class:"text-[9px] font-bold text-red-500"},"FAILED",-1)),u(j(U),{"model-value":"failed"===Il(l),"onUpdate:modelValue":e=>tn(l.latest_plan?.id,e?"failed":"pending",l.company_name),disabled:!Vl(l),class:d(["failed"===Il(l)?"bg-red-500":"bg-gray-200","relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-red-500/20 cursor-pointer disabled:cursor-not-allowed"])},{default:g(()=>[t[59]||(t[59]=r("span",{class:"sr-only"},"Failed",-1)),r("span",{class:d(["failed"===Il(l)?"translate-x-5":"translate-x-1","inline-block h-3 w-3 transform rounded-full bg-white transition-transform"])},null,2)]),_:2},1032,["model-value","onUpdate:modelValue","disabled","class"])],2)])])):c("",!0),r("div",{onClick:t[9]||(t[9]=B(()=>{},["stop"]))},[l.latest_plan&&("rejected"===l.latest_plan.manager_status||"failed"===l.latest_plan.bod_status)&&An(l)?(m(),a("button",{key:0,onClick:e=>K(l.latest_plan),class:"w-full flex justify-center items-center gap-2 text-center text-sm font-bold text-white bg-red-500 hover:bg-red-600 active:scale-[0.98] py-3.5 rounded-xl shadow-lg shadow-red-200/50 ring-1 ring-red-500/20 transition-all animate-pulse"},[...t[62]||(t[62]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-5 h-5"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})],-1),x(" Revise Plan ",-1)])],8,At)):l.latest_plan&&("warning"===_e(l)||"expired"===_e(l)||"expired_warning"===_e(l))&&An(l)&&"ESCALATION"!==l.latest_plan.activity_type&&"created"===l.latest_plan.status?(m(),s(j(M),{key:1,href:e.route("planning.report.create",l.latest_plan.id),class:"w-full flex justify-center items-center gap-2 text-center text-sm font-bold text-white bg-gradient-to-r from-amber-500 to-amber-400 hover:from-amber-400 hover:to-amber-300 active:scale-[0.98] py-3.5 rounded-xl shadow-lg shadow-amber-200/50 ring-1 ring-amber-500/20 transition-all"},{default:g(()=>[...t[63]||(t[63]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-5 h-5 opacity-90"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),x(" Late Report ",-1)])]),_:1},8,["href"])):l.latest_plan&&"created"===_e(l)&&An(l)&&"ESCALATION"!==l.latest_plan.activity_type?(m(),s(j(M),{key:2,href:e.route("planning.report.create",l.latest_plan.id),class:"w-full flex justify-center items-center gap-2 text-center text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 active:scale-[0.98] py-3.5 rounded-xl shadow-lg shadow-blue-200/50 ring-1 ring-blue-500/20 transition-all"},{default:g(()=>[...t[64]||(t[64]=[r("svg",{class:"w-5 h-5 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x(" Create Report ",-1)])]),_:1},8,["href"])):!["none","no_plan_warning","reported","warning","failed_history","approved"].includes(_e(l))&&"ESCALATION"!==l.latest_plan?.activity_type||!An(l)||sn.value||v.timeSettings?.testing_mode?"closed"===_e(l)&&An(l)?(m(),s(j(M),{key:4,href:e.route("planning.create",{customer:l.id}),class:"w-full flex justify-center items-center gap-2 text-center text-sm font-bold text-white bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 active:scale-[0.98] py-3.5 rounded-xl shadow-lg shadow-gray-300/50 ring-1 ring-gray-600/20 transition-all"},{default:g(()=>[...t[65]||(t[65]=[r("svg",{class:"w-5 h-5 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),x(" New Opportunity ",-1)])]),_:1},8,["href"])):(["none","no_plan_warning"].includes(_e(l))||"ESCALATION"===l.latest_plan?.activity_type||"failed"===l.latest_plan?.lifecycle_status&&"created"===l.latest_plan?.status)&&An(l)?(m(),s(j(M),{key:5,href:e.route("planning.create",{customer:l.id}),class:"w-full flex justify-center items-center gap-2 text-center text-sm font-bold text-white bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 active:scale-[0.98] py-3.5 rounded-xl shadow-lg shadow-emerald-200/50 ring-1 ring-emerald-500/20 transition-all"},{default:g(()=>[...t[66]||(t[66]=[r("svg",{class:"w-5 h-5 opacity-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Create Plan ",-1)])]),_:1},8,["href"])):Sn.value?c("",!0):(m(),a("div",Tt," No Action Required ")):(m(),a("div",Dt," wait "+n(ln()),1))])])],8,Je))),128)),0===v.customers.data.length?(m(),a("div",Bt,[...t[67]||(t[67]=[l('<div class="h-20 w-20 bg-gray-50 rounded-2xl flex items-center justify-center mb-6 shadow-sm border border-gray-100"><svg class="w-10 h-10 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div><h3 class="text-gray-900 font-bold text-lg">No Plans Found</h3><p class="text-gray-500 text-sm mt-2 mb-8 max-w-xs mx-auto">It looks like there are no planning for this category yet.</p>',3)])])):c("",!0)]),r("div",Lt,[t[96]||(t[96]=r("div",{class:"absolute left-0 top-0 bottom-0 w-4 bg-gradient-to-r from-white to-transparent z-10 pointer-events-none sm:hidden",style:{opacity:"0"}},null,-1)),t[97]||(t[97]=r("div",{class:"absolute right-0 top-0 bottom-0 w-4 bg-gradient-to-l from-white to-transparent z-10 pointer-events-none sm:hidden",style:{opacity:"0.5"}},null,-1)),r("div",Ot,[r("table",Nt,[r("thead",It,[r("tr",null,[t[72]||(t[72]=r("th",{rowspan:"2",class:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-14"},"No",-1)),r("th",{rowspan:"2",onClick:t[10]||(t[10]=e=>{return t="company_name",be.value===t?fe.value="asc"===fe.value?"desc":"asc":(be.value=t,fe.value="asc"),void ye();var t}),class:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom cursor-pointer group select-none hover:bg-gray-50 transition-colors min-w-[250px]"},[r("div",Vt,[t[71]||(t[71]=x(" Customer ",-1)),r("div",{class:d(["p-1 rounded-md",{"bg-gray-100":"company_name"===be.value}])},["company_name"===be.value&&"asc"===fe.value?(m(),a("svg",Pt,[...t[68]||(t[68]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0-3.75-3.75M17.25 21 21 17.25"},null,-1)])])):"company_name"===be.value&&"desc"===fe.value?(m(),a("svg",Et,[...t[69]||(t[69]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-5.25v12m0 0 3.75-3.75M13.5 21l-3.75-3.75"},null,-1)])])):(m(),a("svg",zt,[...t[70]||(t[70]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"},null,-1)])]))],2)])]),t[73]||(t[73]=r("th",{rowspan:"2",class:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-48"},"Product",-1)),t[74]||(t[74]=r("th",{rowspan:"2",class:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-48"},"Marketing",-1)),t[75]||(t[75]=r("th",{rowspan:"2",class:"px-2 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-24"},"Planning",-1)),t[76]||(t[76]=r("th",{rowspan:"2",class:"px-2 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-24"},"Control",-1)),t[77]||(t[77]=r("th",{rowspan:"2",class:"px-2 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider align-bottom w-24"},"Monitoring",-1)),Mn.value?(m(),a("th",Ht,"Manager Action")):c("",!0),Sn.value?(m(),a("th",Rt,"BOD Action")):c("",!0),Tn.value?(m(),a("th",Ft,"Action")):c("",!0)]),t[78]||(t[78]=r("tr",null,null,-1))]),r("tbody",Ut,[(m(!0),a(o,null,i(v.customers.data,(l,i)=>(m(),a("tr",{key:l.id,onClick:e=>W(l),class:"hover:bg-gray-50/60 transition-colors cursor-pointer"},[r("td",Wt,n((v.customers.from||1)+i),1),r("td",Yt,[r("div",qt,n(l.company_name),1)]),r("td",Jt,[r("span",$t,n(l.product?.name||l.latest_plan?.product?.name||"-"),1)]),r("td",Gt,[r("span",Xt,n(l.marketing?.name||"-"),1)]),r("td",Kt,[r("div",Qt,["none"===_e(l)?(m(),a("div",ea)):"no_plan_warning"===_e(l)?(m(),a("div",{key:1,style:p(Ol(l.created_at)),class:"h-10 w-10 rounded-full bg-red-500 animate-glow-red border border-red-300 shadow-md"},null,4)):l.latest_plan?(m(),a("div",{key:2,class:d(["h-10 w-10 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm transition-all duration-300",{"bg-red-500":"created"===_e(l)||"rejected_final"===_e(l)||"expired"===_e(l),"bg-emerald-500":"reported"===_e(l)||"approved"===_e(l),"bg-gray-800":"closed"===_e(l),"animate-glow-red bg-red-600":"warning"===_e(l)||"expired_warning"===_e(l)||"rejected_warning"===_e(l)}]),style:p(Ol(l.latest_plan))},n(l.latest_plan.activity_code),7)):c("",!0),"approved"===_e(l)?(m(),a("span",ta," Approved ")):"closed"===_e(l)?(m(),a("span",aa," Closing ")):"rejected_final"===_e(l)||"rejected_warning"===_e(l)?(m(),a("span",ra," Rejected ")):["expired","expired_warning"].includes(_e(l))?(m(),a("span",sa," Expired ")):l.latest_plan&&"ESCALATION"!==l.latest_plan.activity_type?(m(),a("span",la,n(Pn(l.latest_plan.planning_date)),1)):c("",!0)])]),r("td",na,[r("div",oa,["none"!==_e(l)&&"no_plan_warning"!==_e(l)||"ESCALATION"===l.latest_plan?.activity_type?l.latest_plan?(m(),a(o,{key:1},[r("div",{onClick:e=>An(l)&&"rejected"===Nl(l)?K(l.latest_plan):null,class:d(["h-10 w-10 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm transition-all duration-300",{"cursor-pointer hover:ring-2 hover:ring-offset-1 hover:ring-red-500":An(l)&&"rejected"===Nl(l),"animate-glow-red bg-red-600 border-2 border-red-400":"escalated"===Nl(l)&&"closed"!==_e(l),"bg-red-500":("rejected"===Nl(l)||"pending"===Nl(l)&&!["reported","approved"].includes(_e(l)))&&"closed"!==_e(l),"bg-yellow-500":("need_review"===Nl(l)||"pending"===Nl(l)&&["reported","approved"].includes(_e(l)))&&"closed"!==_e(l),"bg-emerald-500":"approved"===Nl(l)&&"closed"!==_e(l),"bg-gray-800":"closed"===_e(l)}])},n("ESCALATION"===l.latest_plan.activity_type?"":l.latest_plan.activity_code),11,da),"need_review"===Nl(l)||"pending"===Nl(l)&&"reported"===_e(l)?(m(),a("span",ca," Need Review ")):l.latest_plan.manager_status&&"pending"!==l.latest_plan.manager_status&&"need_review"!==Nl(l)?(m(),a("span",pa,n(Pn(l.latest_plan.manager_reviewed_at||l.latest_plan.updated_at)),1)):c("",!0)],64)):(m(),a("div",ua)):(m(),a("div",ia))])]),r("td",ga,[r("div",ma,["none"===_e(l)||"no_plan_warning"===_e(l)?(m(),a("div",xa)):l.latest_plan?(m(),a(o,{key:1},[r("div",{class:d(["h-10 w-10 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm transition-all duration-300",{"bg-red-500":("failed"===Il(l)||"ESCALATION"===l.latest_plan?.activity_type)&&"closed"!==_e(l),"bg-emerald-500":"success"===Il(l)&&"closed"!==_e(l),"bg-yellow-500":("pending"===Il(l)||"wait_manager"===Il(l))&&"ESCALATION"!==l.latest_plan?.activity_type&&"closed"!==_e(l),"bg-gray-800":"closed"===_e(l)}])},n("ESCALATION"===l.latest_plan.activity_type?"":l.latest_plan.activity_code),3),"wait_manager"===Il(l)?(m(),a("span",va," Wait Manager ")):"pending"===Il(l)&&"ESCALATION"!==l.latest_plan.activity_type?(m(),a("span",ba," Need Review ")):l.latest_plan.bod_status&&"pending"!==l.latest_plan.bod_status?(m(),a("span",fa,n(Pn(l.latest_plan.bod_reviewed_at||l.latest_plan.updated_at)),1)):c("",!0)],64)):(m(),a("div",ha,"F"))])]),Mn.value?(m(),a("td",ya,[r("div",wa,[Cn.value&&l.latest_plan?.manager_status&&"pending"!==l.latest_plan.manager_status?(m(),a("button",{key:0,onClick:B(e=>en(l.latest_plan?.id,"pending",l.company_name),["stop"]),class:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-500 border border-gray-300 hover:bg-gray-200 hover:text-gray-700 shadow-sm transition-all",title:"Reset to Pending (Un-Reject/Un-Approve)"},[...t[79]||(t[79]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-4 h-4"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1)])],8,_a)):(m(),a(o,{key:1},[dn(l.latest_plan,"rejected")?(m(),a("button",{key:0,onClick:B(e=>en(l.latest_plan?.id,"rejected"===l.latest_plan?.manager_status?"pending":"rejected",l.company_name),["stop"]),disabled:!l.latest_plan||["none","no_plan_warning","created"].includes(_e(l))||"ESCALATION"===l.latest_plan.activity_type||nn(l.latest_plan)||!on(l.latest_plan,"rejected",l),class:d(["flex items-center justify-center rounded-full transition-all duration-200 border",["rejected"===l.latest_plan?.manager_status&&"warning"!==_e(l)?"bg-red-500 text-white border-red-600 shadow-sm px-3 py-1 h-7 gap-1.5":"w-7 h-7 border-red-200 text-red-300 bg-white hover:bg-red-500 hover:text-white hover:border-red-500 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-red-300"]]),title:pn(l.latest_plan)||"Reject"},[t[80]||(t[80]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-3.5 h-3.5"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)),"rejected"===l.latest_plan?.manager_status&&"warning"!==_e(l)?(m(),a("span",ja,"Reject")):c("",!0)],10,ka)):c("",!0),dn(l.latest_plan,"escalated")?(m(),a("button",{key:1,onClick:B(e=>l.latest_plan?en(l.latest_plan.id,"escalated"===l.latest_plan.manager_status?"pending":"escalated",l.company_name):un(l),["stop"]),disabled:nn(l.latest_plan)||l.latest_plan&&!on(l.latest_plan,"escalated",l),class:d(["flex items-center justify-center rounded-full transition-all duration-200 border",["escalated"===l.latest_plan?.manager_status?"bg-amber-500 text-white border-amber-600 shadow-sm px-3 py-1 h-7 gap-1.5":"w-7 h-7 border-amber-200 text-amber-300 bg-white hover:bg-amber-500 hover:text-white hover:border-amber-500 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-amber-300"]]),title:pn(l.latest_plan)||"Escalate"},[t[81]||(t[81]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-3.5 h-3.5"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})],-1)),"escalated"===l.latest_plan?.manager_status?(m(),a("span",Ma,"Escalate")):c("",!0)],10,Ca)):c("",!0),dn(l.latest_plan,"approved")?(m(),a("button",{key:2,onClick:B(e=>en(l.latest_plan?.id,"approved"===l.latest_plan?.manager_status?"pending":"approved",l.company_name),["stop"]),disabled:!l.latest_plan||["none","no_plan_warning","created"].includes(_e(l))||"ESCALATION"===l.latest_plan.activity_type||nn(l.latest_plan)||!on(l.latest_plan,"approved",l),class:d(["flex items-center justify-center rounded-full transition-all duration-200 border",["approved"===l.latest_plan?.manager_status&&"warning"!==_e(l)?"bg-emerald-500 text-white border-emerald-600 shadow-sm px-3 py-1 h-7 gap-1.5":"w-7 h-7 border-emerald-200 text-emerald-300 bg-white hover:bg-emerald-500 hover:text-white hover:border-emerald-500 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-emerald-300"]]),title:pn(l.latest_plan)||"Approve"},[t[82]||(t[82]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"w-3.5 h-3.5"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1)),"approved"===l.latest_plan?.manager_status&&"warning"!==_e(l)?(m(),a("span",Aa,"Approve")):c("",!0)],10,Sa)):c("",!0)],64))])])):c("",!0),Sn.value?(m(),a("td",{key:1,class:"px-2 py-4 text-center align-middle",onClick:t[11]||(t[11]=B(()=>{},["stop"]))},[r("div",Da,[l.latest_plan&&Vl(l)?(m(),a(o,{key:0},["failed"===Il(l)?(m(),a("div",{key:0,onClick:B(e=>tn(l.latest_plan.id,"pending",l.company_name),["stop"]),class:d(["flex items-center justify-between w-24 h-8 bg-red-500 rounded-full px-3 shadow-md cursor-pointer hover:bg-red-600 active:scale-95 transition-all group select-none",{"opacity-50 cursor-not-allowed":cn(l.latest_plan)}])},[...t[83]||(t[83]=[r("div",{class:"bg-white/20 rounded-full p-0.5"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",class:"w-3 h-3 text-white"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])],-1),r("span",{class:"text-[10px] font-bold text-white tracking-wider uppercase"},"FAILED",-1)])],10,Ta)):"success"===Il(l)?(m(),a("div",{key:1,onClick:B(e=>tn(l.latest_plan.id,"pending",l.company_name),["stop"]),class:d(["flex items-center justify-between w-24 h-8 bg-emerald-500 rounded-full px-3 shadow-md cursor-pointer hover:bg-emerald-600 active:scale-95 transition-all group select-none",{"opacity-50 cursor-not-allowed":cn(l.latest_plan)}])},[...t[84]||(t[84]=[r("span",{class:"text-[10px] font-bold text-white tracking-wider uppercase"},"NEXT",-1),r("div",{class:"bg-white/20 rounded-full p-0.5"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",class:"w-3 h-3 text-white"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])],-1)])],10,Ba)):(m(),a("div",{key:2,class:d(["flex items-center justify-center w-24 h-8 bg-white border border-gray-200 rounded-full shadow-sm overflow-hidden select-none",{"opacity-50 cursor-not-allowed":cn(l.latest_plan)}])},[r("button",{onClick:B(e=>!cn(l.latest_plan)&&tn(l.latest_plan.id,"failed",l.company_name),["stop"]),disabled:cn(l.latest_plan),class:"w-1/2 h-full flex items-center justify-center text-gray-400 hover:bg-red-50 hover:text-red-500 active:bg-red-100 transition-colors border-r border-gray-100 group/fail",title:"Mark as Failed"},[...t[85]||(t[85]=[r("span",{class:"text-[9px] font-bold uppercase mr-1 group-hover/fail:scale-110 transition-transform"},"Fail",-1)])],8,La),r("button",{onClick:B(e=>!cn(l.latest_plan)&&tn(l.latest_plan.id,"success",l.company_name),["stop"]),disabled:cn(l.latest_plan),class:"w-1/2 h-full flex items-center justify-center text-gray-400 hover:bg-emerald-50 hover:text-emerald-500 active:bg-emerald-100 transition-colors group/next",title:"Mark as Next"},[...t[86]||(t[86]=[r("span",{class:"text-[9px] font-bold uppercase ml-1 group-hover/next:scale-110 transition-transform"},"Next",-1)])],8,Oa)],2))],64)):(m(),a("div",Na,[...t[87]||(t[87]=[r("div",{class:"w-1.5 h-1.5 rounded-full bg-gray-300"},null,-1)])]))])])):c("",!0),Tn.value?(m(),a("td",{key:2,class:"px-6 py-4 text-center align-middle",onClick:t[12]||(t[12]=B(()=>{},["stop"]))},[r("div",Ia,[l.latest_plan&&An(l)?(m(),a(o,{key:0},["warning"!==_e(l)&&"expired"!==_e(l)&&"expired_warning"!==_e(l)||"ESCALATION"===l.latest_plan.activity_type||"created"!==l.latest_plan.status?"created"===_e(l)&&"ESCALATION"!==l.latest_plan.activity_type&&new Date(we()).setHours(0,0,0,0)<new Date(l.latest_plan.planning_date).setHours(0,0,0,0)?(m(),a("div",Va,[t[89]||(t[89]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"size-3"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1)),x(" Wait "+n(Pn(l.latest_plan.planning_date)),1)])):"created"===_e(l)&&"ESCALATION"!==l.latest_plan.activity_type?(m(),s(j(M),{key:2,href:e.route("planning.report.create",l.latest_plan.id),class:"w-32 justify-center text-xs font-semibold text-white bg-blue-500 hover:bg-blue-600 hover:shadow-md px-3 py-1.5 rounded-lg shadow-sm transition-all whitespace-nowrap flex items-center gap-1.5"},{default:g(()=>[...t[90]||(t[90]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"size-3"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})],-1),x(" Create Report ",-1)])]),_:1},8,["href"])):"rejected"===l.latest_plan.manager_status||"failed"===l.latest_plan.bod_status?(m(),a("button",{key:3,onClick:e=>K(l.latest_plan),class:"w-32 justify-center text-xs font-bold text-white bg-red-500 hover:bg-red-600 hover:shadow-md px-3 py-1.5 rounded-lg shadow-sm transition-all whitespace-nowrap flex items-center gap-1.5 animate-pulse"},[...t[91]||(t[91]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"size-3.5"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})],-1),x(" Revise Plan ",-1)])],8,Pa)):"closed"===_e(l)?(m(),s(j(M),{key:4,href:e.route("planning.create",{customer:l.id}),class:"w-32 justify-center text-xs font-bold text-white bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 hover:shadow-md px-3 py-1.5 rounded-lg shadow-sm transition-all whitespace-nowrap flex items-center gap-1.5"},{default:g(()=>[...t[92]||(t[92]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"size-3"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),x(" New Opportunity ",-1)])]),_:1},8,["href"])):c("",!0):(m(),s(j(M),{key:0,href:e.route("planning.report.create",l.latest_plan.id),class:"w-32 justify-center text-xs font-semibold text-white bg-amber-500 hover:bg-amber-600 hover:shadow-md px-3 py-1.5 rounded-lg shadow-sm transition-all whitespace-nowrap flex items-center gap-1.5 mx-auto"},{default:g(()=>[...t[88]||(t[88]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"size-3"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),x(" Late Report ",-1)])]),_:1},8,["href"]))],64)):c("",!0),(["none","no_plan_warning"].includes(_e(l))||"ESCALATION"===l.latest_plan?.activity_type||"failed"===l.latest_plan?.lifecycle_status&&"created"===l.latest_plan?.status&&"rejected"!==l.latest_plan?.manager_status&&"failed"!==l.latest_plan?.bod_status)&&An(l)?(m(),a(o,{key:1},[!l.latest_plan||"reported"!==_e(l)||l.latest_plan.manager_status&&"pending"!==l.latest_plan.manager_status&&("approved"!==l.latest_plan.manager_status||l.latest_plan.bod_status&&"pending"!==l.latest_plan.bod_status)||"success"===l.latest_plan.bod_status||"failed"===l.latest_plan.bod_status||"rejected"===l.latest_plan.manager_status?sn.value||v.timeSettings?.testing_mode?(m(),s(j(M),{key:2,href:e.route("planning.create",{customer:l.id}),class:"w-32 justify-center text-xs font-semibold text-white bg-emerald-600 hover:bg-emerald-700 hover:shadow-md px-3 py-1.5 rounded-lg shadow-sm transition-all whitespace-nowrap flex items-center gap-1.5"},{default:g(()=>[...t[95]||(t[95]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor",class:"size-3"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),x(" Create Plan ",-1)])]),_:1},8,["href"])):(m(),a("div",{key:1,class:"w-32 justify-center px-3 py-1.5 rounded-lg text-xs font-semibold bg-gray-100 text-gray-400 border border-gray-200 cursor-not-allowed whitespace-nowrap shadow-sm flex items-center gap-1",title:"Plan creation is only allowed on: "+ln()},[t[94]||(t[94]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"size-3"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})],-1)),x(" Wait "+n(ln()),1)],8,za)):(m(),a("div",Ea,[...t[93]||(t[93]=[r("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),x(" Wait Review ",-1)])]))],64)):c("",!0)])])):c("",!0)],8,Zt))),128))])])])]),v.customers.links?(m(),a("div",Ha,[r("div",Ra,[r("div",Fa,[t[98]||(t[98]=x(" Showing ",-1)),r("span",Ua,n(v.customers.from||1),1),t[99]||(t[99]=x(" to ",-1)),r("span",Za,n(v.customers.to||v.customers.total),1),t[100]||(t[100]=x(" of ",-1)),r("span",Wa,n(v.customers.total),1)]),r("div",Ya,[t[102]||(t[102]=r("div",{class:"px-3 py-1.5 text-xs font-medium text-slate-500 bg-slate-50 border-r border-gray-300 whitespace-nowrap"}," Per page ",-1)),S(r("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>oe.value=e),class:"border-none py-1.5 pl-2 pr-8 text-xs font-medium text-gray-700 bg-white focus:ring-0 cursor-pointer hover:bg-gray-50 transition-colors"},[...t[101]||(t[101]=[r("option",{value:"10"},"10",-1),r("option",{value:"25"},"25",-1),r("option",{value:"50"},"50",-1),r("option",{value:"all"},"All",-1)])],512),[[D,oe.value]])])]),v.customers.links&&v.customers.links.length>3&&"all"!==oe.value?(m(),a("div",qa,[(m(!0),a(o,null,i(v.customers.links,(e,t)=>(m(),s(j(M),{key:t,href:e.url??"#",innerHTML:e.label,class:d(["px-2 py-1 sm:px-3 sm:py-1.5 rounded-md border text-xs font-medium transition-all active:scale-95",e.active?"bg-emerald-600 text-white border-emerald-600 shadow-sm":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"])},null,8,["href","innerHTML","class"]))),128))])):c("",!0)])):c("",!0)],512),[[T,"table"===ie.value]]),"calendar"===ie.value?(m(),a("div",Ja,[u(ke,{customers:v.customers.data,month:ce.value,year:pe.value,getStatus:_e,getBlinkStyle:Ol,onOpenDetail:W,onChangeMonth:ae,onCreatePlan:t[14]||(t[14]=t=>j(w).get(e.route("planning.create"),{customer:Z.value?.id,date:t}))},null,8,["customers","month","year"])])):c("",!0)]),u(j(F),{appear:"",show:O.value,as:"template"},{default:g(()=>[u(j(E),{as:"div",onClose:Y,class:"relative z-50"},{default:g(()=>[u(j(z),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:g(()=>[...t[103]||(t[103]=[r("div",{class:"fixed inset-0 bg-black/25 backdrop-blur-sm"},null,-1)])]),_:1}),r("div",$a,[r("div",Ga,[u(j(z),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:g(()=>[u(j(H),{class:"w-full max-w-4xl transform overflow-hidden rounded-2xl bg-white text-left align-middle shadow-xl transition-all sm:rounded-3xl"},{default:g(()=>[r("div",Xa,[r("div",Ka,[u(j(R),{as:"h3",class:"text-base sm:text-xl font-bold leading-tight text-gray-900"},{default:g(()=>[t[104]||(t[104]=r("span",{class:"block sm:inline"},"Planning History:",-1)),r("span",Qa,n(Z.value?.company_name),1)]),_:1}),r("button",{onClick:Y,class:"flex-shrink-0 p-2 -m-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all"},[...t[105]||(t[105]=[r("svg",{class:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r("div",er,[Z.value?.plans?.length?(m(!0),a(o,{key:0},i(Z.value.plans.filter(e=>"ESCALATION"!==e.activity_type),e=>(m(),a("div",{key:e.id,class:"border border-gray-200 rounded-xl sm:rounded-2xl overflow-hidden shadow-sm bg-white hover:shadow-md transition-shadow duration-300"},[r("div",tr,[r("div",ar,[r("div",rr,[r("span",sr,n(e.activity_code),1),r("div",lr,[r("span",nr,n(Pn(e.planning_date)),1),r("span",or,n(e.activity_type),1)])]),r("div",ir,[r("div",dr,[e.user?.avatar_url?(m(),a("img",{key:0,src:e.user.avatar_url,alt:e.user?.name,class:"h-5 w-5 sm:h-6 sm:w-6 rounded-full object-cover"},null,8,cr)):(m(),a("div",pr,n(e.user?.name?.charAt(0)||"U"),1)),r("span",ur,n(e.user?.name),1)]),e.manager_status?(m(),a("span",{key:0,class:d(["px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full text-[9px] sm:text-[10px] font-bold uppercase tracking-wide border shadow-sm",{"bg-green-100 text-green-700 border-green-200":"approved"===e.manager_status,"bg-red-100 text-red-700 border-red-200":"rejected"===e.manager_status,"bg-orange-100 text-orange-700 border-orange-200":"escalated"===e.manager_status,"bg-gray-100 text-gray-600 border-gray-200":"pending"===e.manager_status}])},n(e.manager_status),3)):c("",!0)])])]),r("div",gr,[r("div",mr,[t[109]||(t[109]=r("h4",{class:"text-[10px] sm:text-xs font-bold text-emerald-600 uppercase tracking-wider flex items-center gap-2"},[r("svg",{class:"h-3.5 w-3.5 sm:h-4 sm:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),x(" Planning Details ")],-1)),r("div",xr,[r("div",vr,[r("div",br,[t[106]||(t[106]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium"},"Product",-1)),r("div",fr,n(Z.value?.product?.name||e.product?.name||"-"),1)]),r("div",hr,[t[107]||(t[107]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium"},"Project",-1)),r("div",{class:"text-xs sm:text-sm text-gray-900 mt-0.5 truncate",title:e.project_name},n(e.project_name||"-"),9,yr)])]),r("div",null,[t[108]||(t[108]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium mb-1"},"Description",-1)),r("div",wr,n(e.description),1)])])]),r("div",_r,[r("h4",kr,[t[110]||(t[110]=r("span",{class:"flex items-center gap-2"},[r("svg",{class:"h-3.5 w-3.5 sm:h-4 sm:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),x(" Report Details ")],-1)),e.report?(m(),a("span",jr,["Late Report"===e.lifecycle_status_label||e.report.execution_date&&new Date(e.report.execution_date).setHours(0,0,0,0)>new Date(e.planning_date).setHours(0,0,0,0)?(m(),a("span",Cr," LATE REPORT ")):(m(),a("span",{key:1,class:d([e.report.is_success?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-red-100 text-red-700 border-red-200","text-[9px] sm:text-[10px] font-bold px-2 py-0.5 rounded-full border shadow-sm"])},n(e.report.is_success?"SUCCESS":"FAILED"),3))])):c("",!0)]),e.report?(m(),a("div",Mr,[r("div",Sr,[r("div",Ar,[t[111]||(t[111]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium"},"Execution",-1)),r("div",Dr,n(Pn(e.report.execution_date)),1)]),r("div",Tr,[t[112]||(t[112]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium"},"Location",-1)),r("div",{class:"text-xs sm:text-sm text-gray-900 mt-0.5 truncate",title:e.report.location},n(e.report.location),9,Br)])]),r("div",Lr,[r("div",Or,[t[113]||(t[113]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium"},"PIC",-1)),r("div",Nr,n(e.report.pic),1)]),r("div",Ir,[t[114]||(t[114]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium"},"Position",-1)),r("div",{class:"text-xs sm:text-sm text-gray-900 mt-0.5 truncate",title:e.report.position},n(e.report.position),9,Vr)])]),r("div",Pr,[r("div",Er,[t[115]||(t[115]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium"},"Progress",-1)),r("span",{class:d(["text-[10px] sm:text-xs font-bold",{"text-gray-800":"100%-Closing"===e.report.progress,"text-emerald-600":e.report.progress&&e.report.progress.includes("100")&&"100%-Closing"!==e.report.progress,"text-blue-600":e.report.progress&&!e.report.progress.includes("100"),"text-gray-400":!e.report.progress}])},n(e.report.progress||"-"),3)]),r("div",zr,[r("div",{class:d(["h-full rounded-full transition-all duration-500 ease-out",{"bg-gray-800":"100%-Closing"===e.report.progress,"bg-emerald-500":e.report.progress&&e.report.progress.includes("100")&&"100%-Closing"!==e.report.progress,"bg-blue-500":e.report.progress&&parseInt(e.report.progress)>=75&&!e.report.progress.includes("100"),"bg-amber-500":e.report.progress&&parseInt(e.report.progress)>=50&&parseInt(e.report.progress)<75,"bg-orange-500":e.report.progress&&parseInt(e.report.progress)>=25&&parseInt(e.report.progress)<50,"bg-red-400":e.report.progress&&parseInt(e.report.progress)<25,"bg-gray-200":!e.report.progress}]),style:p({width:e.report.progress?(parseInt(e.report.progress)||0)+"%":"0%"})},null,6)])]),r("div",null,[t[116]||(t[116]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium mb-1"},"Result",-1)),r("div",Hr,n(e.report.result_description),1)]),e.report.next_plan_description?(m(),a("div",Rr,[t[117]||(t[117]=r("label",{class:"block text-[9px] sm:text-[10px] text-gray-400 uppercase font-medium mb-1"},"Next Plan",-1)),r("div",Fr,n(e.report.next_plan_description),1)])):c("",!0)])):(m(),a("div",Ur,[...t[118]||(t[118]=[r("svg",{class:"h-8 w-8 sm:h-10 sm:w-10 mb-2 opacity-40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),r("span",{class:"text-[10px] sm:text-xs font-medium"},"No report created yet",-1)])]))]),e.status_logs&&e.status_logs.length>0&&e.status_logs.some(e=>e.notes)?(m(),a("div",Zr,[t[119]||(t[119]=r("h4",{class:"text-[10px] sm:text-xs font-bold text-amber-600 uppercase tracking-wider flex items-center gap-2"},[r("svg",{class:"h-3.5 w-3.5 sm:h-4 sm:w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),x(" Status Notes ")],-1)),r("div",Wr,[(m(!0),a(o,null,i(e.status_logs.filter(e=>e.notes).sort((e,t)=>new Date(e.created_at)-new Date(t.created_at)),e=>(m(),a("div",{key:e.id,class:"bg-white p-2.5 rounded-lg border border-amber-100 shadow-sm"},[r("div",Yr,[r("span",qr,n(e.user?.name||("manager_status"===e.field?"Manager":"BOD")),1),r("span",Jr,n(Pn(e.created_at)),1)]),r("div",$r,' "'+n(e.notes)+'" ',1),r("div",Gr,[r("span",{class:d(["text-[9px] px-1.5 py-0.5 rounded-full font-medium",{"bg-red-50 text-red-600":"rejected"===e.new_value||"failed"===e.new_value,"bg-emerald-50 text-emerald-600":"approved"===e.new_value||"success"===e.new_value,"bg-amber-50 text-amber-600":"escalated"===e.new_value}+" uppercase tracking-wide"])},n(e.new_value),3)])]))),128))])])):c("",!0)])]))),128)):c("",!0),Z.value?.plans?.length?c("",!0):(m(),a("div",Xr,[...t[120]||(t[120]=[r("div",{class:"inline-flex h-14 w-14 sm:h-16 sm:w-16 items-center justify-center rounded-full bg-gray-100 mb-4"},[r("svg",{class:"h-7 w-7 sm:h-8 sm:w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),r("h3",{class:"text-base sm:text-lg font-medium text-gray-900"},"No Planning History",-1),r("p",{class:"mt-1 text-xs sm:text-sm text-gray-500"},"This customer has no recorded plans or reports.",-1)])]))]),r("div",{class:"sticky bottom-0 bg-white/95 backdrop-blur-sm border-t border-gray-100 px-4 sm:px-6 py-3 sm:py-4 flex justify-end"},[r("button",{type:"button",class:"inline-flex justify-center items-center gap-2 rounded-xl border border-gray-200 bg-white px-4 sm:px-5 py-2 sm:py-2.5 text-xs sm:text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 shadow-sm transition-all duration-200",onClick:Y},[...t[121]||(t[121]=[r("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),x(" Close Details ",-1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),bn.value?(m(),a("div",Kr,[r("div",{class:"absolute inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:jn}),r("div",Qr,[r("div",es,[r("div",{class:d(["relative flex-shrink-0 w-full sm:w-20 flex items-center justify-center py-6 sm:py-0 sm:min-h-[200px] sm:rounded-l-xl overflow-hidden",{"bg-yellow-500":"bod"===fn.value.type||"manager"===fn.value.type,"bg-red-600":!0}])},[...t[122]||(t[122]=[l('<div class="absolute inset-0 opacity-10"><div class="absolute inset-0" style="background-image:repeating-linear-gradient(45deg, transparent, transparent 10px, white 10px, white 20px);"></div></div><div class="relative z-10"><div class="relative w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center shadow-lg ring-2 ring-white/30"><svg class="w-6 h-6 text-white drop-shadow-md" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"></path></svg></div></div>',2)])],2),r("div",ts,[r("button",{onClick:jn,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors"},[...t[123]||(t[123]=[r("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[132]||(t[132]=r("h3",{class:"text-lg font-bold text-gray-900 tracking-tight pr-8"},[r("span",null,"Action Required")],-1)),r("div",as,[r("div",rs,[r("p",ss,[t[124]||(t[124]=x(" You have ",-1)),r("span",ls,[r("span",ns,n(fn.value.count),1)]),t[125]||(t[125]=x(" items needing attention: ",-1))]),r("ul",os,[fn.value.data.reviews>0?(m(),a("li",is,[t[126]||(t[126]=r("span",{class:"text-gray-600 font-medium flex items-center gap-2"},[r("span",{class:"w-1.5 h-1.5 rounded-full bg-yellow-500"}),x(" Pending Reviews (BOD) ")],-1)),r("span",ds,n(fn.value.data.reviews),1)])):c("",!0),fn.value.data.approvals>0?(m(),a("li",cs,[t[127]||(t[127]=r("span",{class:"text-gray-600 font-medium flex items-center gap-2"},[r("span",{class:"w-1.5 h-1.5 rounded-full bg-yellow-500"}),x(" Pending Approvals ")],-1)),r("span",ps,n(fn.value.data.approvals),1)])):c("",!0),fn.value.data.missing>0?(m(),a("li",us,[t[128]||(t[128]=r("span",{class:"text-gray-600 font-medium flex items-center gap-2"},[r("span",{class:"w-1.5 h-1.5 rounded-full bg-orange-500"}),x(" Customers No Planning ")],-1)),r("span",gs,n(fn.value.data.missing),1)])):c("",!0),fn.value.data.rejected>0?(m(),a("li",ms,[t[129]||(t[129]=r("span",{class:"text-gray-600 font-medium flex items-center gap-2"},[r("span",{class:"w-1.5 h-1.5 rounded-full bg-red-600"}),x(" Rejected Plans ")],-1)),r("span",xs,n(fn.value.data.rejected),1)])):c("",!0),fn.value.data.expired>0?(m(),a("li",vs,[t[130]||(t[130]=r("span",{class:"text-gray-600 font-medium flex items-center gap-2"},[r("span",{class:"w-1.5 h-1.5 rounded-full bg-red-500"}),x(" Expired Plans ")],-1)),r("span",bs,n(fn.value.data.expired),1)])):c("",!0),fn.value.data.late>0?(m(),a("li",fs,[t[131]||(t[131]=r("span",{class:"text-gray-600 font-medium flex items-center gap-2"},[r("span",{class:"w-1.5 h-1.5 rounded-full bg-amber-500"}),x(" Late Follow-up ")],-1)),r("span",hs,n(fn.value.data.late),1)])):c("",!0)])])]),r("div",{class:"mt-3.5 flex flex-col-reverse sm:flex-row sm:justify-end gap-2.5"},[r("button",{onClick:jn,class:"px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all shadow-sm hover:shadow"}," Close "),r("button",{onClick:jn,class:"px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] bg-red-600 hover:bg-red-700"}," Don't Remind Today ")])])])])])):c("",!0)]),u(I,{show:Pl.value,onClose:rn,"max-width":"lg",noPadding:!0},{default:g(()=>[r("div",ys,[t[143]||(t[143]=x(" \\n ",-1)),r("div",{class:d(["relative flex-shrink-0 w-full sm:w-20 flex items-center justify-center py-6 sm:py-0 sm:min-h-[200px] sm:rounded-l-xl overflow-hidden",{"bg-red-600":"rejected"===zl.value||"failed"===zl.value,"bg-amber-500":"escalated"===zl.value,"bg-emerald-600":"approved"===zl.value||"success"===zl.value,"bg-slate-500":"pending"===zl.value}])},[t[136]||(t[136]=r("div",{class:"absolute inset-0 opacity-10"},[r("div",{class:"absolute inset-0",style:{"background-image":"repeating-linear-gradient(45deg, transparent, transparent 10px, white 10px, white 20px)"}})],-1)),r("div",ws,[r("div",_s,["rejected"===zl.value||"failed"===zl.value?(m(),a("svg",ks,[...t[133]||(t[133]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])):"escalated"===zl.value?(m(),a("svg",js,[...t[134]||(t[134]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},null,-1)])])):(m(),a("svg",Cs,[...t[135]||(t[135]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"},null,-1)])]))])])],2),r("div",Ms,[r("h3",Ss,n("control"===El.value?"Confirm Manager Action":"Confirm BOD Action"),1),r("div",As,[r("p",Ds,[t[137]||(t[137]=x(" Change status to ",-1)),r("span",{class:d(["inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-md font-semibold text-xs shadow-sm transition-all",{"bg-red-50 text-red-700 ring-1 ring-red-200":"rejected"===zl.value||"failed"===zl.value,"bg-amber-50 text-amber-700 ring-1 ring-amber-200":"escalated"===zl.value,"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200":"approved"===zl.value||"success"===zl.value,"bg-slate-50 text-slate-700 ring-1 ring-slate-200":"pending"===zl.value}])},[r("span",{class:d(["w-1.5 h-1.5 rounded-full",{"bg-red-500 animate-pulse":"rejected"===zl.value||"failed"===zl.value,"bg-amber-500 animate-pulse":"escalated"===zl.value,"bg-emerald-500 animate-pulse":"approved"===zl.value||"success"===zl.value,"bg-slate-500":"pending"===zl.value}])},null,2),x(" "+n(Kl[zl.value]?.text),1)],2),t[138]||(t[138]=x(" for planning ",-1))]),r("div",Ts,[r("div",Bs,[t[139]||(t[139]=r("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})],-1)),r("p",Ls,n(Rl.value),1)])])]),Cn.value||"pending"===zl.value||"escalated"===zl.value?c("",!0):(m(),a("div",Os,[...t[140]||(t[140]=[r("div",{class:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium text-xs bg-amber-50 text-amber-700 ring-1 ring-amber-200/50 backdrop-blur-sm shadow-sm"},[r("svg",{class:"w-3.5 h-3.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})]),x(" Attention: This decision is final and cannot be changed. ")],-1)])])),r("div",Ns,[t[141]||(t[141]=r("label",{for:"actionNotes",class:"block text-xs font-semibold text-gray-700 mb-1.5"},"Notes (Optional)",-1)),S(r("textarea",{id:"actionNotes","onUpdate:modelValue":t[15]||(t[15]=e=>Ul.value=e),rows:"2",class:"block w-full rounded-lg border-gray-200 shadow-sm focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 text-sm resize-none transition-all placeholder:text-gray-400",placeholder:"Add a note..."},null,512),[[A,Ul.value]])]),r("div",Is,[r("button",{onClick:rn,class:"px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all shadow-sm hover:shadow"}," Cancel "),r("button",{onClick:an,class:d(["inline-flex items-center gap-1.5 px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-[1.02] active:scale-[0.98]",{"bg-red-600 hover:bg-red-700":"rejected"===zl.value||"failed"===zl.value,"bg-amber-500 hover:bg-amber-600":"escalated"===zl.value,"bg-emerald-600 hover:bg-emerald-700":"approved"===zl.value||"success"===zl.value,"bg-slate-500 hover:bg-slate-600":"pending"===zl.value}])},[t[142]||(t[142]=r("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})],-1)),x(" Yes, "+n(Kl[zl.value]?.text),1)],2)])])])]),_:1},8,["show"]),u(V,{show:Wl.value,message:Yl.value,type:ql.value,onClose:t[16]||(t[16]=e=>Wl.value=!1)},null,8,["show","message","type"]),u(I,{show:Jl.value,onClose:t[18]||(t[18]=e=>Jl.value=!1),"max-width":"md",noPadding:!0},{default:g(()=>[r("div",Vs,[t[149]||(t[149]=r("div",{class:"flex-shrink-0 w-full sm:w-20 flex items-center justify-center py-5 sm:py-0 sm:min-h-[180px] sm:rounded-l-lg bg-amber-500"},[r("div",{class:"w-11 h-11 rounded-lg bg-white/20 flex items-center justify-center"},[r("svg",{class:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])])],-1)),r("div",Ps,[t[146]||(t[146]=r("h3",{class:"text-base font-semibold text-gray-900"},"Reset All Toggle Limits",-1)),t[147]||(t[147]=r("p",{class:"mt-2 text-sm text-gray-600"},[x(" Are you sure you want to reset all status change limits? This will allow "),r("span",{class:"font-semibold text-gray-900"},"all users"),x(" to make "),r("span",{class:"font-semibold px-1.5 py-0.5 rounded text-xs bg-amber-100 text-amber-700"},"3 new changes"),x(" for each plan. ")],-1)),t[148]||(t[148]=r("p",{class:"mt-2 text-xs text-gray-500"}," This action is irreversible. ",-1)),r("div",Es,[r("button",{onClick:t[17]||(t[17]=e=>Jl.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancel "),r("button",{onClick:Xl,disabled:$l.value,class:"inline-flex items-center gap-1.5 px-4 py-2 text-sm font-semibold text-white rounded-lg bg-amber-500 hover:bg-amber-600 disabled:opacity-50"},[$l.value?(m(),a("svg",Hs,[...t[144]||(t[144]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):(m(),a("svg",Rs,[...t[145]||(t[145]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"},null,-1)])])),x(" "+n($l.value?"Resetting...":"Yes, Reset All"),1)],8,zs)])])])]),_:1},8,["show"]),gn.value?(m(),a("div",Fs,[r("div",{class:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity",onClick:t[19]||(t[19]=e=>gn.value=!1)}),r("div",Us,[r("div",Zs,[r("div",Ws,[t[151]||(t[151]=l('<div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"><div class="sm:flex sm:items-start"><div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"><svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"></path></svg></div><div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"><h3 class="text-lg font-bold leading-6 text-gray-900" id="modal-title">Mark Plan as Failed?</h3><div class="mt-2"><p class="text-sm text-gray-500"> Are you sure you want to mark this plan as <span class="font-bold text-red-600">FAILED</span>? </p><p class="text-sm text-gray-500 mt-2"> This action cannot be undone. This will close the current plan as &#39;Failed&#39; and allow you to create a new plan. </p></div></div></div></div>',1)),r("div",Ys,[r("button",{type:"button",onClick:vn,disabled:xn.value,class:"inline-flex w-full justify-center rounded-xl bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed items-center gap-2"},[xn.value?(m(),a("svg",Js,[...t[150]||(t[150]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):c("",!0),x(" "+n(xn.value?"Processing...":"Yes, Mark as Failed"),1)],8,qs),r("button",{type:"button",onClick:t[20]||(t[20]=e=>gn.value=!1),disabled:xn.value,class:"mt-3 inline-flex w-full justify-center rounded-xl bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto"}," Cancel ",8,$s)])])])])])):c("",!0),u(I,{show:$.value,onClose:Q,"max-width":"2xl",noPadding:!0},{default:g(()=>[r("div",{class:"bg-white px-6 py-4 flex justify-between items-center border-b border-gray-100"},[t[153]||(t[153]=r("h3",{class:"text-lg font-bold text-gray-900 flex items-center gap-2"},[r("span",{class:"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center text-amber-600"},[r("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])]),x(" Revise Plan ")],-1)),r("button",{onClick:Q,class:"text-gray-400 hover:text-gray-500"},[...t[152]||(t[152]=[r("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("div",Gs,[r("form",{onSubmit:B(ee,["prevent"]),class:"space-y-8"},[r("div",Xs,[t[158]||(t[158]=r("div",{class:"absolute top-0 left-0 w-1.5 h-full bg-amber-400"},null,-1)),t[159]||(t[159]=r("h3",{class:"text-base font-bold text-gray-900 mb-6 flex items-center gap-2 pl-2"}," Original Plan Details ",-1)),r("div",Ks,[r("div",Qs,[r("div",null,[t[154]||(t[154]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Planning Date",-1)),S(r("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>j(X).planning_date=e),type:"date",min:On.value,max:Ln.value,class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none transition-all text-sm shadow-sm font-medium text-gray-600"},null,8,el),[[A,j(X).planning_date]]),j(X).errors.planning_date?(m(),a("p",tl,n(j(X).errors.planning_date),1)):c("",!0)]),r("div",null,[t[156]||(t[156]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Activity Type",-1)),S(r("select",{"onUpdate:modelValue":t[22]||(t[22]=e=>j(X).activity_type=e),class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none transition-all text-sm bg-white shadow-sm cursor-pointer font-medium text-gray-600"},[t[155]||(t[155]=r("option",{value:"",disabled:""},"Select Activity",-1)),(m(),a(o,null,i(q,e=>r("option",{key:e,value:e},n(e),9,al)),64))],512),[[D,j(X).activity_type]]),j(X).errors.activity_type?(m(),a("p",rl,n(j(X).errors.activity_type),1)):c("",!0)])]),r("div",null,[t[157]||(t[157]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Description",-1)),S(r("textarea",{"onUpdate:modelValue":t[23]||(t[23]=e=>j(X).description=e),rows:"3",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none transition-all text-sm resize-none shadow-sm font-medium text-gray-600 placeholder:text-gray-300",placeholder:"Enter plan description..."},null,512),[[A,j(X).description]]),j(X).errors.description?(m(),a("p",sl,n(j(X).errors.description),1)):c("",!0)])])]),r("div",null,[r("div",ll,[t[161]||(t[161]=r("span",{class:"text-sm font-bold text-gray-700 pl-2"},"Is the plan executed? (Include Report)",-1)),u(j(U),{modelValue:j(X).has_report,"onUpdate:modelValue":t[24]||(t[24]=e=>j(X).has_report=e),class:d([j(X).has_report?"bg-emerald-500":"bg-gray-300","relative inline-flex h-7 w-12 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2"])},{default:g(()=>[t[160]||(t[160]=r("span",{class:"sr-only"},"Include Report",-1)),r("span",{"aria-hidden":"true",class:d([j(X).has_report?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)]),_:1},8,["modelValue","class"])]),S(r("div",nl,[r("div",ol,[t[171]||(t[171]=r("div",{class:"absolute top-0 left-0 w-1.5 h-full bg-emerald-500"},null,-1)),t[172]||(t[172]=r("h3",{class:"text-base font-bold text-gray-900 mb-6 flex items-center gap-2 pl-2"}," Execution Report ",-1)),r("div",il,[r("div",dl,[r("div",null,[t[162]||(t[162]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Execution Date",-1)),S(r("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>j(X).execution_date=e),type:"date",readonly:"",class:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed focus:outline-none shadow-sm font-medium"},null,512),[[A,j(X).execution_date]]),j(X).errors.execution_date?(m(),a("p",cl,n(j(X).errors.execution_date),1)):c("",!0)]),r("div",null,[t[163]||(t[163]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Location",-1)),S(r("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>j(X).location=e),type:"text",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all text-sm shadow-sm font-medium text-gray-600 placeholder:text-gray-300",placeholder:"e.g. Client Office"},null,512),[[A,j(X).location]]),j(X).errors.location?(m(),a("p",pl,n(j(X).errors.location),1)):c("",!0)])]),r("div",ul,[r("div",null,[t[164]||(t[164]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"PIC",-1)),S(r("input",{"onUpdate:modelValue":t[27]||(t[27]=e=>j(X).pic=e),type:"text",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all text-sm shadow-sm font-medium text-gray-600 placeholder:text-gray-300",placeholder:"Person met"},null,512),[[A,j(X).pic]]),j(X).errors.pic?(m(),a("p",gl,n(j(X).errors.pic),1)):c("",!0)]),r("div",null,[t[165]||(t[165]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Position",-1)),S(r("input",{"onUpdate:modelValue":t[28]||(t[28]=e=>j(X).position=e),type:"text",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all text-sm shadow-sm font-medium text-gray-600 placeholder:text-gray-300",placeholder:"PIC Position"},null,512),[[A,j(X).position]]),j(X).errors.position?(m(),a("p",ml,n(j(X).errors.position),1)):c("",!0)])]),r("div",null,[t[166]||(t[166]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Result Description",-1)),S(r("textarea",{"onUpdate:modelValue":t[29]||(t[29]=e=>j(X).result_description=e),rows:"3",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all text-sm resize-none shadow-sm font-medium text-gray-600 placeholder:text-gray-300",placeholder:"Describe the outcome..."},null,512),[[A,j(X).result_description]]),j(X).errors.result_description?(m(),a("p",xl,n(j(X).errors.result_description),1)):c("",!0)]),r("div",vl,[r("div",null,[t[168]||(t[168]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Progress",-1)),S(r("select",{"onUpdate:modelValue":t[30]||(t[30]=e=>j(X).progress=e),class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all text-sm bg-white shadow-sm cursor-pointer font-medium text-gray-600"},[t[167]||(t[167]=r("option",{value:"",disabled:""},"Select Progress",-1)),(m(),a(o,null,i(J,e=>r("option",{key:e,value:e},n(e),9,bl)),64))],512),[[D,j(X).progress]]),j(X).errors.progress?(m(),a("p",fl,n(j(X).errors.progress),1)):c("",!0)]),r("div",null,[t[170]||(t[170]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Goal Achievement?",-1)),u(j(U),{modelValue:j(X).is_success,"onUpdate:modelValue":t[31]||(t[31]=e=>j(X).is_success=e),class:d([j(X).is_success?"bg-emerald-500":"bg-red-500","relative inline-flex h-7 w-14 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2"])},{default:g(()=>[t[169]||(t[169]=r("span",{class:"sr-only"},"Goal Achievement",-1)),r("span",{"aria-hidden":"true",class:d([j(X).is_success?"translate-x-7":"translate-x-0","pointer-events-none inline-block h-6 w-6 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2),j(X).is_success?c("",!0):(m(),a("span",hl,"FAIL")),j(X).is_success?(m(),a("span",yl,"SUCC")):c("",!0)]),_:1},8,["modelValue","class"]),j(X).errors.is_success?(m(),a("p",wl,n(j(X).errors.is_success),1)):c("",!0)])])])]),j(X).has_report&&!Vn.value?(m(),a("div",_l,[t[177]||(t[177]=r("div",{class:"absolute top-0 left-0 w-1.5 h-full bg-blue-500"},null,-1)),t[178]||(t[178]=r("h3",{class:"text-base font-bold text-gray-900 mb-2 flex items-center gap-2 pl-2"}," Next Plan (Mandatory) ",-1)),t[179]||(t[179]=r("p",{class:"text-xs text-blue-800 mb-6 font-medium italic pl-2"},"Since you're reporting, please define the next plan.",-1)),r("div",kl,[r("div",jl,[r("div",null,[t[174]||(t[174]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Next Activity Type",-1)),S(r("select",{"onUpdate:modelValue":t[32]||(t[32]=e=>j(X).next_activity_type=e),class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all text-sm bg-white shadow-sm cursor-pointer font-medium text-gray-600"},[t[173]||(t[173]=r("option",{value:"",disabled:""},"Select Activity",-1)),(m(),a(o,null,i(q,e=>r("option",{key:e,value:e},n(e),9,Cl)),64))],512),[[D,j(X).next_activity_type]]),j(X).errors.next_activity_type?(m(),a("p",Ml,n(j(X).errors.next_activity_type),1)):c("",!0)]),r("div",null,[t[175]||(t[175]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Next Planning Date",-1)),S(r("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>j(X).next_planning_date=e),type:"date",min:Nn.value,max:In.value,class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all text-sm shadow-sm bg-white font-medium text-gray-600"},null,8,Sl),[[A,j(X).next_planning_date]]),j(X).errors.next_planning_date?(m(),a("p",Al,n(j(X).errors.next_planning_date),1)):c("",!0)])]),r("div",null,[t[176]||(t[176]=r("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Next Plan Description",-1)),S(r("textarea",{"onUpdate:modelValue":t[34]||(t[34]=e=>j(X).next_plan_description=e),rows:"3",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all text-sm resize-none shadow-sm font-medium text-gray-600 placeholder:text-gray-300",placeholder:"Plan description for next meeting..."},null,512),[[A,j(X).next_plan_description]]),j(X).errors.next_plan_description?(m(),a("p",Dl,n(j(X).errors.next_plan_description),1)):c("",!0)])])])):c("",!0),j(X).has_report&&Vn.value?(m(),a("div",Tl,[...t[180]||(t[180]=[r("div",{class:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4 text-center sm:text-left"},[r("div",{class:"p-2.5 sm:p-3 bg-emerald-500/20 rounded-xl flex-shrink-0"},[r("svg",{class:"w-6 h-6 sm:w-7 sm:h-7 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),r("div",null,[r("h3",{class:"text-sm sm:text-base font-bold text-white"}," Congratulations! Deal Closing"),r("p",{class:"text-gray-400 text-xs sm:text-sm mt-1 leading-relaxed"},[x("No follow-up plan required. This customer will be marked as "),r("span",{class:"text-emerald-400 font-semibold"},"CLOSED"),x(" after approval.")])])],-1)])])):c("",!0)],512),[[T,j(X).has_report]])]),r("div",Bl,[r("button",{type:"button",onClick:Q,class:"px-5 py-2.5 text-sm font-bold text-gray-600 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors"}," Cancel "),r("button",{type:"submit",class:d(["px-6 py-2.5 text-sm font-bold text-white bg-emerald-500 rounded-xl hover:bg-emerald-600 hover:shadow-lg hover:shadow-emerald-500/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-200",{"opacity-75 cursor-wait":j(X).processing}]),disabled:j(X).processing}," Update Revision ",10,Ll)])],32)])]),_:1},8,["show"])],64))}});export{Ol as default};
