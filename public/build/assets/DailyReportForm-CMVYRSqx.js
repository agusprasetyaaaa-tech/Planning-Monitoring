import{B as e,w as t,r as s,c as r,C as l,D as o,G as a,L as i,I as d,N as n,v as c,K as u,J as p,u as m,y as x,F as g,V as y,U as b,E as f,m as v,O as w,R as h}from"./vendor-Da3FcZX6.js";import{_}from"./Modal-Dq_dlkxU.js";import{l as k,i as C,n as V,u as A,r as U}from"./ui-DwfAqvBQ.js";const z={class:"font-sans"},P={class:"px-5 py-4 border-b border-gray-100 flex items-center justify-between"},S={class:"flex items-center gap-2 sm:gap-3 min-w-0"},j={class:"text-sm sm:text-lg font-bold text-gray-900 leading-tight"},q={class:"px-4 sm:px-5 py-3 sm:py-4 border-b border-gray-100"},R=["value"],B={key:1,class:"flex items-center gap-3 px-3 py-2.5 rounded-lg bg-gray-50 border border-gray-100"},D={class:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-xs font-semibold flex-shrink-0"},L={class:"min-w-0 flex-1"},M={class:"text-xs sm:text-sm font-bold text-gray-800 truncate"},N={class:"text-[10px] sm:text-xs text-gray-400 truncate"},O={key:2,class:"text-[10px] text-gray-400 mt-1.5"},I={class:"px-4 sm:px-5 py-3 sm:py-4 border-b border-gray-100 space-y-4"},E={class:"relative"},F={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},T={key:0,class:"text-rose-500 text-xs mt-1"},$={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},G={class:"relative"},H={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},J={class:"px-4 sm:px-5 py-3 sm:py-4 border-b border-gray-100 space-y-4"},K={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},W=["value"],Q={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},X={class:"px-4 sm:px-5 py-3 sm:py-4 border-b border-gray-100 space-y-4"},Y=["value"],Z={class:"flex items-center justify-between"},ee={class:"relative inline-flex items-center cursor-pointer"},te={class:"px-4 sm:px-5 py-3 sm:py-4 bg-gray-50/50 flex flex-col sm:flex-row items-center justify-end gap-2 sm:gap-3 rounded-b-lg"},se=["disabled"],re={key:0,class:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},le={__name:"DailyReportForm",props:{show:Boolean,report:Object,customers:Array,products:Array,users:Array,auth:Object},emits:["close"],setup(le,{emit:oe}){const ae=le,ie=oe,de=ae.auth.user.roles.includes("Super Admin"),ne=e({user_id:ae.report?.user_id||ae.auth.user.id,customer_id:ae.report?.customer_id||"",product_id:ae.report?.product_id||"",report_date:ae.report?.report_date||(new Date).toISOString().substr(0,10),activity_type:ae.report?.activity_type||"",description:ae.report?.description||"",location:ae.report?.location||"",pic:ae.report?.pic||"",position:ae.report?.position||"",result_description:ae.report?.result_description||"",progress:ae.report?.progress||"",is_success:!ae.report||!!ae.report.is_success,next_plan:ae.report?.next_plan||""});t(()=>ae.report,e=>{e?(ne.user_id=e.user_id,ne.customer_id=e.customer_id,ne.product_id=e.product_id,ne.report_date=e.report_date,ne.activity_type=e.activity_type,ne.description=e.description,ne.location=e.location,ne.pic=e.pic,ne.position=e.position,ne.result_description=e.result_description,ne.progress=e.progress,ne.is_success=!!e.is_success,ne.next_plan=e.next_plan||"",me.value=ae.customers.find(t=>t.id===e.customer_id)||null,ye.value=ae.products.find(t=>t.id===e.product_id)||null):(ne.reset(),ne.user_id=ae.auth.user.id,ne.report_date=(new Date).toISOString().substr(0,10),ne.is_success=!0,me.value=null,ye.value=null)},{immediate:!0});const ce=["Call","Visit","Ent","Online Meeting","Email","Survey","Presentation","Proposal","Negotiation","Admin/Tender","Closing","Other"],ue=["10%-Introduction","20%-Visit","30%-Presentation","40%-Survey","50%-Proposal","75%-Confirm Budget","90%-Tender/Nego","100%-Closing"],pe=s(""),me=s(null),xe=r(()=>""===pe.value?ae.customers:ae.customers.filter(e=>e.company_name.toLowerCase().includes(pe.value.toLowerCase())));t(me,e=>{e?(ne.customer_id=e.id,e.product_id&&(ne.product_id=e.product_id,ye.value=ae.products.find(t=>t.id===e.product_id)||null)):ne.customer_id=""});const ge=s(""),ye=s(null),be=r(()=>{const e=[{id:"",name:"No Product"},...ae.products];return""===ge.value?e:e.filter(e=>e.name.toLowerCase().includes(ge.value.toLowerCase()))});t(ye,e=>{ne.product_id=e?.id||""});const fe=()=>{ae.report?ne.put(route("daily-report.update",ae.report.id),{onSuccess:()=>ie("close")}):ne.post(route("daily-report.store"),{onSuccess:()=>ie("close")})};return(e,t)=>(x(),l(_,{show:le.show,onClose:t[17]||(t[17]=t=>e.$emit("close")),maxWidth:"2xl"},{default:o(()=>[a("div",z,[a("div",P,[a("div",S,[a("div",null,[a("h1",j,i(le.report?"Edit":"Create")+" Daily Activity",1),t[18]||(t[18]=a("p",{class:"text-[10px] sm:text-xs text-gray-400"},"Record sales activity for today",-1))])]),a("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"p-2 -mr-2 text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-gray-100"},[...t[19]||(t[19]=[a("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2.5"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a("form",{onSubmit:d(fe,["prevent"]),class:"max-h-[75vh] overflow-y-auto"},[a("div",q,[t[20]||(t[20]=a("label",{class:"block text-[10px] sm:text-xs font-bold text-gray-400 uppercase tracking-widest mb-2"},[p("Report For "),a("span",{class:"text-rose-400"},"*")],-1)),m(de)?n((x(),c("select",{key:0,"onUpdate:modelValue":t[1]||(t[1]=e=>m(ne).user_id=e),required:"",class:"w-full rounded-lg border-gray-200 bg-gray-50/50 py-2.5 px-3 text-sm text-gray-700 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors"},[(x(!0),c(g,null,y(le.users,e=>(x(),c("option",{key:e.id,value:e.id},i(e.name)+" ("+i(e.email)+")",9,R))),128))],512)),[[b,m(ne).user_id]]):(x(),c("div",B,[a("div",D,i(le.auth.user.name.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2)),1),a("div",L,[a("p",M,i(le.auth.user.name),1),a("p",N,i(le.auth.user.email),1)])])),m(de)?(x(),c("p",O,"Recording activity on behalf of salesperson.")):u("",!0)]),a("div",I,[t[28]||(t[28]=a("div",{class:"text-[10px] sm:text-xs font-bold text-gray-400 uppercase tracking-widest mb-1"},"Customer & Product",-1)),a("div",null,[t[23]||(t[23]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Company Name "),a("span",{class:"text-rose-400"},"*")],-1)),f(m(k),{modelValue:me.value,"onUpdate:modelValue":t[3]||(t[3]=e=>me.value=e),nullable:""},{default:o(()=>[a("div",E,[f(m(C),{class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors",displayValue:e=>e?.company_name??"",onChange:t[2]||(t[2]=e=>pe.value=e.target.value),placeholder:"",required:""},null,8,["displayValue"]),f(m(V),{class:"absolute inset-y-0 right-0 flex items-center pr-3"},{default:o(()=>[...t[21]||(t[21]=[a("svg",{class:"h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})],-1)])]),_:1}),f(m(A),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-lg bg-white py-1 text-sm shadow-xl ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:o(()=>[0===xe.value.length&&""!==pe.value?(x(),c("div",F," No customer found. ")):u("",!0),(x(!0),c(g,null,y(xe.value,e=>(x(),l(m(U),{key:e.id,value:e},{default:o(({selected:s,active:r})=>[a("li",{class:v(["relative cursor-pointer select-none py-2 pl-10 pr-4",{"bg-emerald-600 text-white":r,"text-gray-900":!r}])},[a("span",{class:v(["block truncate",{"font-semibold":s,"font-normal":!s}])},i(e.company_name),3),s?(x(),c("span",{key:0,class:v(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":r,"text-emerald-600":!r}])},[...t[22]||(t[22]=[a("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1)])],2)):u("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})])]),_:1},8,["modelValue"]),m(ne).errors.customer_id?(x(),c("div",T,i(m(ne).errors.customer_id),1)):u("",!0)]),a("div",$,[a("div",null,[t[26]||(t[26]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Product",-1)),f(m(k),{modelValue:ye.value,"onUpdate:modelValue":t[5]||(t[5]=e=>ye.value=e),nullable:""},{default:o(()=>[a("div",G,[f(m(C),{class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors",displayValue:e=>e?.name??"",onChange:t[4]||(t[4]=e=>ge.value=e.target.value),placeholder:""},null,8,["displayValue"]),f(m(V),{class:"absolute inset-y-0 right-0 flex items-center pr-3"},{default:o(()=>[...t[24]||(t[24]=[a("svg",{class:"h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})],-1)])]),_:1}),f(m(A),{class:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-lg bg-white py-1 text-sm shadow-xl ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:o(()=>[0===be.value.length&&""!==ge.value?(x(),c("div",H," No product found. ")):u("",!0),(x(!0),c(g,null,y(be.value,e=>(x(),l(m(U),{key:e.id,value:e},{default:o(({selected:s,active:r})=>[a("li",{class:v(["relative cursor-pointer select-none py-2 pl-10 pr-4",{"bg-emerald-600 text-white":r,"text-gray-900":!r}])},[a("span",{class:v(["block truncate",{"font-semibold":s,"font-normal":!s}])},i(e.name),3),s?(x(),c("span",{key:0,class:v(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":r,"text-emerald-600":!r}])},[...t[25]||(t[25]=[a("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1)])],2)):u("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})])]),_:1},8,["modelValue"])]),a("div",null,[t[27]||(t[27]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Report Date "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>m(ne).report_date=e),type:"date",required:"",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors"},null,512),[[w,m(ne).report_date]])])])]),a("div",J,[t[35]||(t[35]=a("div",{class:"text-[10px] sm:text-xs font-bold text-gray-400 uppercase tracking-widest mb-1"},"Activity Details",-1)),a("div",K,[a("div",null,[t[30]||(t[30]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Activity Type "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>m(ne).activity_type=e),required:"",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors"},[t[29]||(t[29]=a("option",{value:"",disabled:""},"Select Activity",-1)),(x(),c(g,null,y(ce,e=>a("option",{key:e,value:e},i(e),9,W)),64))],512),[[b,m(ne).activity_type]])]),a("div",null,[t[31]||(t[31]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Location "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>m(ne).location=e),type:"text",required:"",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 placeholder:text-gray-300 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors"},null,512),[[w,m(ne).location]])])]),a("div",Q,[a("div",null,[t[32]||(t[32]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Customer PIC "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>m(ne).pic=e),type:"text",required:"",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 placeholder:text-gray-300 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors"},null,512),[[w,m(ne).pic]])]),a("div",null,[t[33]||(t[33]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("PIC Position "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>m(ne).position=e),type:"text",required:"",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 placeholder:text-gray-300 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors"},null,512),[[w,m(ne).position]])])]),a("div",null,[t[34]||(t[34]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Activity Description "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>m(ne).description=e),required:"",rows:"3",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 placeholder:text-gray-300 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 resize-none transition-colors"},null,512),[[w,m(ne).description]])])]),a("div",X,[t[40]||(t[40]=a("div",{class:"text-[10px] sm:text-xs font-bold text-gray-400 uppercase tracking-widest mb-1"},"Results & Outcome",-1)),a("div",null,[t[36]||(t[36]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Result Description "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("textarea",{"onUpdate:modelValue":t[12]||(t[12]=e=>m(ne).result_description=e),required:"",rows:"3",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 placeholder:text-gray-300 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 resize-none transition-colors"},null,512),[[w,m(ne).result_description]])]),a("div",null,[t[37]||(t[37]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},"Next Plan",-1)),n(a("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>m(ne).next_plan=e),rows:"2",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 placeholder:text-gray-300 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 resize-none transition-colors"},null,512),[[w,m(ne).next_plan]])]),a("div",null,[t[39]||(t[39]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1.5"},[p("Progress "),a("span",{class:"text-rose-400"},"*")],-1)),n(a("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>m(ne).progress=e),required:"",class:"w-full rounded-lg border-gray-200 bg-white py-2.5 px-3 text-sm text-gray-700 focus:border-emerald-400 focus:ring-1 focus:ring-emerald-400 transition-colors"},[t[38]||(t[38]=a("option",{value:"",disabled:""},"Select Progress",-1)),(x(),c(g,null,y(ue,e=>a("option",{key:e,value:e},i(e),9,Y)),64))],512),[[b,m(ne).progress]])]),a("div",{class:v(["rounded-lg border p-3.5 transition-colors duration-200",m(ne).is_success?"border-emerald-200 bg-emerald-50/50":"border-rose-200 bg-rose-50/50"])},[a("div",Z,[a("div",null,[a("span",{class:v(["text-sm font-medium",m(ne).is_success?"text-emerald-800":"text-rose-800"])}," Goal Achievement ",2),a("p",{class:v(["text-[10px] mt-0.5",m(ne).is_success?"text-emerald-500":"text-rose-500"])},i(m(ne).is_success?"Activity goal was achieved":"Activity goal was not achieved"),3)]),a("label",ee,[n(a("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>m(ne).is_success=e),class:"sr-only peer"},null,512),[[h,m(ne).is_success]]),a("div",{class:v(["w-11 h-6 rounded-full transition-colors duration-200 peer-focus:ring-2 peer-focus:ring-offset-1",m(ne).is_success?"bg-emerald-500 peer-focus:ring-emerald-300":"bg-rose-400 peer-focus:ring-rose-300"])},null,2),a("div",{class:v(["absolute left-0.5 top-0.5 w-5 h-5 bg-white rounded-full shadow-sm transition-transform duration-200",m(ne).is_success?"translate-x-5":"translate-x-0"])},null,2)])])],2)]),a("div",te,[a("button",{type:"button",onClick:t[16]||(t[16]=t=>e.$emit("close")),class:"w-full sm:w-auto px-4 py-2.5 text-sm font-bold text-gray-500 hover:text-gray-700 transition-colors order-2 sm:order-1"}," Cancel "),a("button",{type:"submit",disabled:m(ne).processing,class:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold rounded-lg shadow-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed order-1 sm:order-2"},[m(ne).processing?(x(),c("svg",re,[...t[41]||(t[41]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),p(" "+i(le.report?"Update":"Submit")+" Report ",1)],8,se)])],32)])]),_:1},8,["show"]))}};export{le as default};
